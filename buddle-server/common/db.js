const mongoose=require("mongoose"),MAX_CONNECT_TIME=10;module.exports=class{constructor(o){this.options=o,this.time=0}async init(){try{await mongoose.connect(this.options.host),console.log("connected db")}catch(o){throw new Error(o)}}async connect(){try{await this.init()}catch(o){if(console.log("db error ",o),this.time>MAX_CONNECT_TIME)return void console.log("max connect times");await this.init()}}};