const fs=require("fs");module.exports=o=>{try{const c=fs.readdirSync("./controllers");for(const n of c.filter(o=>o.endsWith(".js"))){var r=require("../controllers/"+n)||void 0;if(!(r&&r instanceof Object))throw n+"没有提供正确的接口";for(const l in r){var{method:e,url:t,route:s}=r[l];if(!(e&&t&&s))throw n+' 的 "'+l+'" 配置不正确';console.log(`注册API ${t} : ${e}`),o[e](t,s)}}}catch(o){console.log(o)}};