"use strict";function ownKeys(r,e){var t,n=Object.keys(r);return Object.getOwnPropertySymbols&&(t=Object.getOwnPropertySymbols(r),e&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})),n.push.apply(n,t)),n}function _objectSpread(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(t),!0).forEach(function(e){_defineProperty(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))})}return r}function _defineProperty(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function asyncGeneratorStep(e,r,t,n,o,c,u){try{var s=e[c](u),a=s.value}catch(e){return void t(e)}s.done?r(a):Promise.resolve(a).then(n,o)}function _asyncToGenerator(s){return function(){var e=this,u=arguments;return new Promise(function(r,t){var n=s.apply(e,u);function o(e){asyncGeneratorStep(n,r,t,o,c,"next",e)}function c(e){asyncGeneratorStep(n,r,t,o,c,"throw",e)}o(void 0)})}}var routerExports={},Config=require("./../dbmodel/BlogConfig"),User=require("./../dbmodel/User"),_require=require("../common/util"),parseToken=_require.parseToken,reMapError=_require.reMapError;routerExports.updateConfig={method:"post",url:"/updateConfig",route:function(){var r=_asyncToGenerator(regeneratorRuntime.mark(function e(r){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.request.body.config,e.prev=1,e.next=4,Config.updateOne({},{$set:_objectSpread({},t)});case 4:r.body={success:!0},e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),r.body={success:!1,errorMsg:e.t0};case 10:case"end":return e.stop()}},e,null,[[1,7]])}));return function(e){return r.apply(this,arguments)}}()},routerExports.getConfig={method:"get",url:"/getConfig",route:function(){var r=_asyncToGenerator(regeneratorRuntime.mark(function e(r){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Config.findOne({});case 3:t=e.sent,r.body={success:!0,config:t},e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r.body={success:!1,errorMsg:e.t0};case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(e){return r.apply(this,arguments)}}()},module.exports=routerExports;