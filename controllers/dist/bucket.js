"use strict";function asyncGeneratorStep(e,r,t,n,o,a,c){try{var u=e[a](c),s=u.value}catch(e){return void t(e)}u.done?r(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(u){return function(){var e=this,c=arguments;return new Promise(function(r,t){var n=u.apply(e,c);function o(e){asyncGeneratorStep(n,r,t,o,a,"next",e)}function a(e){asyncGeneratorStep(n,r,t,o,a,"throw",e)}o(void 0)})}}var SinaCloud=require("scs-sdk"),_require=require("../common/util"),reMapError=_require.reMapError;function callUploadBucket(e){return new Promise(function(t,n){(new SinaCloud.S3).putObject({ACL:"public-read",Bucket:"ada.bucket",Key:"test.jpg",Body:e},function(e,r){e?n(e):t("uploaded")})})}SinaCloud.config=new SinaCloud.Config({accessKeyId:"1b24azces6uiVWvMDbnN",secretAccessKey:"59769489567c92ab6d05026ec8322c4c503c17f2",sslEnabled:!1});var routerExports={};routerExports.uploadBucket={method:"post",url:"/uploadBucket",route:function(){var r=_asyncToGenerator(regeneratorRuntime.mark(function e(r){var t,n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(r.request.body),n=t.binary,e.prev=1,o=Buffer(n.replace(/^data:image\/\w+;base64,/,""),"base64"),e.next=5,callUploadBucket(o);case 5:r.body={success:!0},e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),r.body={success:!1,errorMsg:e.t0};case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(e){return r.apply(this,arguments)}}()},module.exports=routerExports;