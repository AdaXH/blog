var _leftStyle,_createClass=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(e){var t=!1;if("function"==typeof define&&define.amd&&(define(e),t=!0),"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&(module.exports=e(),t=!0),!t){var n=window.Cookies,o=window.Cookies=e();o.noConflict=function(){return window.Cookies=n,o}}}(function(){function p(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var o in n)t[o]=n[o]}return t}return function e(g){function m(e,t,n){var o;if("undefined"!=typeof document){if(1<arguments.length){if("number"==typeof(n=p({path:"/"},m.defaults,n)).expires){var r=new Date;r.setMilliseconds(r.getMilliseconds()+864e5*n.expires),n.expires=r}n.expires=n.expires?n.expires.toUTCString():"";try{o=JSON.stringify(t),/^[\{\[]/.test(o)&&(t=o)}catch(e){}t=g.write?g.write(t,e):encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=(e=(e=encodeURIComponent(String(e))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var i="";for(var a in n)n[a]&&(i+="; "+a,!0!==n[a]&&(i+="="+n[a]));return document.cookie=e+"="+t+i}e||(o={});for(var s=document.cookie?document.cookie.split("; "):[],l=/(%[0-9A-Z]{2})+/g,c=0;c<s.length;c++){var u=s[c].split("="),d=u.slice(1).join("=");this.json||'"'!==d.charAt(0)||(d=d.slice(1,-1));try{var f=u[0].replace(l,decodeURIComponent);if(d=g.read?g.read(d,f):g(d,f)||d.replace(l,decodeURIComponent),this.json)try{d=JSON.parse(d)}catch(e){}if(e===f){o=d;break}e||(o[f]=d)}catch(e){}}return o}}return(m.set=m).get=function(e){return m.call(m,e)},m.getJSON=function(){return m.apply({json:!0},[].slice.call(arguments))},m.defaults={},m.remove=function(e,t){m(e,"",p(t,{expires:-1}))},m.withConverter=e,m}(function(){})});var Cookies=window.Cookies,API=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments[2],o={method:t,headers:{"content-type":"application/json",accept:"application/json",authorization:Cookies.get("token")||"no-permission"}};return"POST"===t&&(o.body=JSON.stringify(n)),fetch(e,o).then(function(e){return 200<=e.status&&e.status<300?e.json():401===e.status?e.json():e.status}).then(function(e){return e.success?e:e.errorMsg||e}).catch(function(e){return e})};!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t(e):"function"==typeof define&&define.amd?define(t):t(e)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0,function(t){"use strict";var n,o=t.Base64;if("undefined"!=typeof module&&module.exports)if("undefined"!=typeof navigator&&"ReactNative"==navigator.product);else try{n=require("buffer").Buffer}catch(e){}var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=function(e){for(var t={},n=0,o=e.length;n<o;n++)t[e.charAt(n)]=n;return t}(r),a=String.fromCharCode,s=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?a(192|t>>>6)+a(128|63&t):a(224|t>>>12&15)+a(128|t>>>6&63)+a(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return a(240|t>>>18&7)+a(128|t>>>12&63)+a(128|t>>>6&63)+a(128|63&t)},l=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,c=function(e){return e.replace(l,s)},u=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(1<e.length?e.charCodeAt(1):0)<<8|(2<e.length?e.charCodeAt(2):0);return[r.charAt(n>>>18),r.charAt(n>>>12&63),2<=t?"=":r.charAt(n>>>6&63),1<=t?"=":r.charAt(63&n)].join("")},d=t.btoa?function(e){return t.btoa(e)}:function(e){return e.replace(/[\s\S]{1,3}/g,u)},f=n?n.from&&Uint8Array&&n.from!==Uint8Array.from?function(e){return(e.constructor===n.constructor?e:n.from(e)).toString("base64")}:function(e){return(e.constructor===n.constructor?e:new n(e)).toString("base64")}:function(e){return d(c(e))},g=function(e,t){return t?f(String(e)).replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,""):f(String(e))},m=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),p=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return a(55296+(t>>>10))+a(56320+(1023&t));case 3:return a((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return a((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},y=function(e){return e.replace(m,p)},h=function(e){var t=e.length,n=t%4,o=(0<t?i[e.charAt(0)]<<18:0)|(1<t?i[e.charAt(1)]<<12:0)|(2<t?i[e.charAt(2)]<<6:0)|(3<t?i[e.charAt(3)]:0),r=[a(o>>>16),a(o>>>8&255),a(255&o)];return r.length-=[0,0,2,1][n],r.join("")},v=t.atob?function(e){return t.atob(e)}:function(e){return e.replace(/[\s\S]{1,4}/g,h)},_=n?n.from&&Uint8Array&&n.from!==Uint8Array.from?function(e){return(e.constructor===n.constructor?e:n.from(e,"base64")).toString()}:function(e){return(e.constructor===n.constructor?e:new n(e,"base64")).toString()}:function(e){return y(v(e))},e=function(e){return _(String(e).replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))};if(t.Base64={VERSION:"2.4.8",atob:v,btoa:d,fromBase64:e,toBase64:g,utob:c,encode:g,encodeURI:function(e){return g(e,!0)},btou:y,decode:e,noConflict:function(){var e=t.Base64;return t.Base64=o,e}},"function"==typeof Object.defineProperty){var b=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};t.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",b(function(){return e(this)})),Object.defineProperty(String.prototype,"toBase64",b(function(e){return g(this,e)})),Object.defineProperty(String.prototype,"toBase64URI",b(function(){return g(this,!0)}))}}return t.Meteor&&(Base64=t.Base64),"undefined"!=typeof module&&module.exports?module.exports.Base64=t.Base64:"function"==typeof define&&define.amd&&define([],function(){return t.Base64}),{Base64:t.Base64}}),document.querySelectorAll||(document.querySelectorAll=function(e){var t,n=document.createElement("style"),o=[];for(document.documentElement.firstChild.appendChild(n),document._qsa=[],n.styleSheet.cssText=e+"{x-qsa:expression(document._qsa && document._qsa.push(this))}",window.scrollBy(0,0),n.parentNode.removeChild(n);document._qsa.length;)(t=document._qsa.shift()).style.removeAttribute("x-qsa"),o.push(t);return document._qsa=null,o}),document.querySelector||(document.querySelector=function(e){var t=document.querySelectorAll(e);return t.length?t[0]:null});var qsaWorker=function(){var o=1e4;return document.createElement("div").querySelectorAll?function(e,t){return e.querySelectorAll(t)}:function(e,t){var n=""===e.id;n&&(++o,e.id="__qsa"+o);try{return document.querySelectorAll("#"+e.id+" "+t)}finally{n&&(e.id="")}}}(),Mobile=function(){function t(e){_classCallCheck(this,t),this.items=e&&e.menu&&0!==e.menu.length?e.menu:[{name:"menu1",callback:function(){return console.log("click menu1")}},{name:"menu2",callback:function(){return console.log("click menu2")}}],this.appendTarget=e&&e.target||document.body,this.bg=e&&e.bg||"http://www.rui2.net/uploadfile/output/3/2013/1001/4acf64758d420524.jpg",this.ul={},this.interval=void 0,this.menuColor=e&&e.menuColor||"black",this.searchInterval=void 0,this.searchCallback=e&&e.searchCallback||function(e){console.log(e)},this.appendNodes=[],this.param=e.param}return _createClass(t,[{key:"start",value:function(e){var t=this;0!==this.appendNodes.length&&this.renderTime(),document.getElementById("_container")&&0!==document.getElementById("_container").childNodes.length||(this.init(),setTimeout(function(){t.container.style.transform="rotateX(45deg) rotateY(68deg) rotateZ(-45deg) scale(1.3)",setTimeout(function(){t.container.style.transform="rotateX(60deg) rotateZ(45deg) rotateY(0deg) scale(1.3)",setTimeout(function(){t.container.style.transform="rotateX(0deg) rotateZ(0deg) rotateY(0deg) scale(1)"},1e3)},1e3)},1e3),e&&e())}},{key:"end",value:function(){this.interval&&clearInterval(this.interval),this.searchInterval&&clearInterval(this.searchInterval),document.getElementById("_container")&&this.appendTarget.removeChild(document.getElementById("_container"))}},{key:"endInterval",value:function(){this.interval&&clearInterval(this.interval),this.searchInterval&&clearInterval(this.searchInterval)}},{key:"init",value:function(){this.createOperationUl(),this.addMouseEnter(this.ul),this.appendNodes=[this.createTopface,this.createBackface,this.createRight,this.createLeft,this.createBottom,this.createForward,this.createOperation],this.createContainer(this.appendNodes),this.interval||this.renderTime()}},{key:"addMouseEnter",value:function(e){for(var t=e.ul,n=e.ul2,o=e.ul3,r=this,i=t.getElementsByTagName("li"),a=n.getElementsByTagName("li"),s=o.getElementsByTagName("li"),l=function(e){i[e].onmouseover=function(){recover(i,{background:"none",paddingLeft:"10px",color:r.menuColor}),recover(a,{background:"none"}),recover(s,{background:"none"}),this.style.background="#A4D768",this.style.paddingLeft="20px",this.style.color="white",a[e].style.background="#A4D768",s[e].style.background="#A4D768"}},c=0;c<i.length;c++)l(c);t.onmouseleave=function(){recover(i,{background:"none",paddingLeft:"10px",color:r.menuColor}),recover(a,{background:"none"}),recover(s,{background:"none"})}}},{key:"createClock",value:function(){var e=document.createElement("div");setStyle(e,clockStyle);var t=document.createElement("p");return t.setAttribute("id","menu_plugin_clock"),setStyle(t,timeStyle),e.appendChild(t),e}},{key:"renderTime",value:function(){var r=document.getElementById("menu_plugin_clock"),e=document.getElementById("_search");this.searchInterval=setInterval(function(){e.style.opacity="0.2",setTimeout(function(){e.style.opacity="1"},1500)},3e3),this.interval=setInterval(function(){var e=new Date,t=e.getHours()<10?"0"+e.getHours():e.getHours(),n=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),o=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();r.innerText=t+" : "+n+" : "+o},1e3)}},{key:"createSearch",value:function(){var t=this,e=document.createElement("div");e.setAttribute("id","_search");var n=document.createElement("input");return setStyle(n,inputStyle),setStyle(e,searchStyle),n.placeholder="O",n.addEventListener("focus",function(){this.style.width="140px",clearInterval(t.searchInterval),this.style.paddingLeft="15px",this.style.textAlign="left",this.placeholder="百度一下，你就知道"},!1),n.addEventListener("blur",function(){this.style.width="25px",this.style.paddingLeft="0px",this.style.textAlign="center",this.placeholder="O",t.searchInterval=setInterval(function(){e.style.opacity="0.2",setTimeout(function(){e.style.opacity="1"},1500)},3e3)},!1),n.addEventListener("keyup",function(e){e||window.event;t.searchCallback(this.value)},!1),e.appendChild(n),e}},{key:"createContainer",value:function(e){var t=document.createElement("div");setStyle(t,containerStyle),t.setAttribute("id","_container");var n=!0,o=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;if(/Object/.test(Object.prototype.toString.call(s.call(this)))){var l=s.call(this);for(var c in l)t.appendChild(l[c])}else t.appendChild(s.call(this))}}catch(e){o=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}this.container=t,this.appendTarget.style.perspective="1400px",this.appendTarget.style.transformStyle="preserve-3d",this.appendTarget.appendChild(t)}},{key:"createOperation",value:function(){var e=this,t=document.createElement("p");t.innerText=" <",setStyle(t,leftOstyle),t.addEventListener("click",function(){e.container.style.transform="rotateX(60deg) rotateZ(45deg) rotateY(0deg) scale(1.3)"},!1);var n=document.createElement("p");n.innerText=" >",setStyle(n,rightOstyle),n.addEventListener("click",function(){e.container.style.transform="rotateX(45deg) rotateZ(-45deg) rotateY(0deg) scale(1.3)"},!1);var o=document.createElement("p");return o.innerText="x",o.addEventListener("click",function(){e.container.style.transform="rotateX(0deg) rotateZ(0deg) rotateY(0deg) scale(1)"},!1),setStyle(o,closeOStyle),{leftO:t,rightO:n,closeO:o}}},{key:"createTopface",value:function(){var e=document.createElement("div");e.id="_mobilrFace";var t=document.createElement("div"),n=document.createElement("div"),o=document.createElement("div"),r=document.createElement("div");if(o.innerText=".....",n.innerText="100%",setStyle(r,statusBarStyle),setStyle(t,barreryStyle),setStyle(n,barreryStatusStyle),setStyle(e,topStyle),setStyle(o,singStyle),e.appendChild(this.ul.ul),e.style.background="url("+this.bg+")",e.style.backgroundSize="cover",r.appendChild(n),r.appendChild(t),r.appendChild(o),e.appendChild(r),e.appendChild(this.createClock()),e.appendChild(this.createSearch()),this.param){var i=document.createElement("div");i.innerHTML=this.param,e.appendChild(i)}return e}},{key:"createBackface",value:function(){var e=document.createElement("div");return setStyle(e,backStyle),e.style.background="url("+this.bg+")",e.style.backgroundSize="cover",e}},{key:"createLeft",value:function(){var e=document.createElement("div");return setStyle(e,leftStyle),e.style.background="url("+this.bg+") left",e.style.backgroundSize="cover",e.appendChild(this.ul.ul3),e}},{key:"createRight",value:function(){var e=document.createElement("div");return setStyle(e,rightStyle),e.style.background="url("+this.bg+") right",e.style.backgroundSize="cover",e.appendChild(this.ul.ul2),e}},{key:"createBottom",value:function(){var e=document.createElement("div");return setStyle(e,bottomStyle),e.style.background="url("+this.bg+") bottom",e.style.backgroundSize="cover",e}},{key:"createForward",value:function(){var e=document.createElement("div");return setStyle(e,forwardStyle),e.style.background="url("+this.bg+") top",e.style.backgroundSize="cover",e}},{key:"createOperationUl",value:function(){var e=document.createElement("ul"),t=document.createElement("ul"),n=document.createElement("ul"),o=!0,r=!1,i=void 0;try{for(var a,s=this.items[Symbol.iterator]();!(o=(a=s.next()).done);o=!0){var l=a.value,c=document.createElement("li"),u=document.createElement("li"),d=document.createElement("li");c.innerText=l.name,l.callback&&c.addEventListener("click",l.callback,!1),e.appendChild(setStyle(c,li1Style)),c.style.color=this.menuColor,u.style.height="30px",u.style.transition="all ease .3s",u.style.boxSizing="border-box",d.style.height="30px",d.style.transition="all ease .3s",d.style.boxSizing="border-box",t.appendChild(u),n.appendChild(d)}}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}setStyle(e,ul1Style),setStyle(t,ul2Style),setStyle(n,ul2Style),this.ul={ul:e,ul2:t,ul3:n}}}]),t}();function recover(e,t){var n=!0,o=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;for(var l in t)s.style[l]=t[l]}}catch(e){o=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}}function setStyle(e,t){if(!e||!t)return null;if(!t)return e;for(var n in t)e.style[n]=t[n];return e}var leftOstyle={position:"absolute",left:"300px",bottom:"50px",cursor:"pointer",fontSize:"20px","text-shadow":"0px 10px 10px rgba(6, 5, 5, 0.9)"},statusBarStyle={position:"absolute",width:"100%",height:"20px",top:"6x"},barreryStyle={position:"absolute",top:"6px",right:"6px",width:"20px",height:"8px",background:"white",borderRadius:"3px"},singStyle={position:"absolute",top:"-2px",left:"6px",color:"white",fontSize:"25px",lineHeight:"8px"},barreryStatusStyle={position:"absolute",width:"20px",top:"6px",right:"35px",lineHeight:"8px",textAligin:"center",color:"white",fontSize:"12px",transform:"scale(0.7)"},closeOStyle={position:"absolute",bottom:"50px",cursor:"pointer",fontSize:"20px","text-shadow":"0px 10px 10px rgba(6, 5, 5, 0.9)",left:"400px"},rightOstyle={position:"absolute",right:"200px",bottom:"50px",cursor:"pointer",fontSize:"20px","text-shadow":"0px 10px 10px rgba(6, 5, 5, 0.9)"},clockStyle={position:" absolute",width:"200px",height:"100px",top:"20px"},inputStyle={outline:"none",border:"none",display:"block",margin:"0px auto",cursor:"pointer",textAlign:"center",width:"25px",transition:"all .3s",height:"25px",background:"rgba(255,255,255,0.7)",borderRadius:"12.5px",color:"#666",fontSize:"12px"},searchStyle={willChange:"opacity",width:"200px",height:"30px",position:"absolute",top:"130px",opacity:"0.2",filter:"alpha(opacity = 20)",transition:"all 1s","transform-style":"preserve-3d",transform:"translateZ(1px)"},timeStyle={textAlign:"center",lineHeight:"100px",fontSize:"20px",color:"white"},ul2Style={width:"20px",position:"absolute",bottom:"5px",minHeight:"70px"},ul1Style={position:"absolute",bottom:"5px",left:"0",cursor:"pointer",minHeight:"70px","transform-style":"preserve-3d",transform:"translateZ(0.1px)"},li1Style={transformStyle:"preserve-3d",transform:"translateX(-1px)",padding:"0 0 0 10px",height:"30px","line-height":"30px",width:"200px",fontSize:"12px",transition:"all ease .3s","box-sizing":"border-box",cursor:"pointer"},bottomStyle={"transform-style":"preserve-3d",transform:"rotateX(90deg) rotateY(0deg) rotateZ(0deg) translateY(-10px) translateZ(-10px)",position:"absolute","box-sizing":"border-box",width:"200px",top:"430px",left:"300px",height:"20px","transform-origin":"left","background-size":"auto",borderRadius:"10px"},forwardStyle={"transform-style":"preserve-3d",transform:"rotateX(90deg) rotateY(0deg) rotateZ(0deg) translateY(-10px) translateZ(-10px)",position:"absolute","box-sizing":"border-box",width:"200px",top:"30px",left:"300px",height:"20px","transform-origin":"left","background-size":"auto",borderRadius:"10px"},rightStyle={"transform-style":"preserve-3d",position:"absolute","box-sizing":"border-box",width:"20px",height:"400px",left:"480px",top:"50px","background-size":"cover",transform:"rotateY(90deg) translateZ(10px)  translateX(10px)",borderRadius:"10px"},leftStyle=(_leftStyle={"transform-style":"preserve-3d",position:"absolute","box-sizing":"border-box",width:"20px"},_defineProperty(_leftStyle,"transform-style","preserve-3d"),_defineProperty(_leftStyle,"height","400px"),_defineProperty(_leftStyle,"left","280px"),_defineProperty(_leftStyle,"top","50px"),_defineProperty(_leftStyle,"background-size","cover"),_defineProperty(_leftStyle,"transform","rotateY(-90deg) translateX(-10px) translateY(0px) translateZ(-10px)"),_defineProperty(_leftStyle,"borderRadius","10px"),_leftStyle),topStyle={width:"200px",height:"400px",left:"300px",top:"50px",zIndex:"1","transform-origin":"top","background-size":"cover",border:"0.5px solid white",position:"absolute",borderRadius:"5px","box-sizing":"border-box",transformStyle:"preserve-3d",transform:"translateZ(0px)"},backStyle={width:"200px",height:"400px",left:"300px",top:"50px","transform-origin":"top","background-size":"cover",position:"absolute",borderRadius:"10px","box-sizing":"border-box","box-shadow":"0px 50px 50px rgba(6, 5, 5, 0.9)",transformStyle:"preserve-3d",transform:"translateZ(-20px)"},shadowStyle={"transform-style":"preserve-3d",width:"200px",height:"400px",left:"300px",top:"50px","transform-origin":"top",position:"absolute","box-sizing":"border-box",background:"transparent",transform:"translateZ(-100px)"},containerStyle={"will-change":"transform",width:"700px",height:"600px",position:"absolute",top:"50%",zIndex:"5",left:"41%",margin:"-300px 0 0 -350px",perspective:"1400px","transform-style":"preserve-3d","transform-origin":"center",transition:"all 1s"},src=["./../upload/user_avatar/lyy.jpg","./../resouce/images/qq.png","./../resouce/images/load.png","./../resouce/images/qzone.png","./../resouce/images/wechat.png","./../resouce/images/ly.jpg","./../resouce/bg/1.jpg","./../resouce/bg/2.jpg","./../resouce/bg/3.jpg","./../resouce/bg/4.jpg","./../resouce/bg/5.jpg","./../resouce/bg/6.jpg","./../upload/user_avatar/default_avatar.jpg","./../resouce/gallery/1.jpg","./../resouce/gallery/2.jpg","./../resouce/gallery/3.jpg","./../resouce/gallery/4.jpg","./../resouce/gallery/5.jpg","./../resouce/gallery/6.jpg","./../resouce/gallery/7.jpg","./../resouce/gallery/8.jpg","./../resouce/gallery/9.jpg","./../resouce/gallery/10.jpg","./../resouce/gallery/11.jpg","./../resouce/gallery/12.jpg","./../resouce/images/loading.png","./../resouce/images/loading1.png","./../resouce/images/point.png","./../resouce/images/time.png","./../resouce/images/title.png","./../resouce/images/type.png","./../resouce/images/menu.jpg"],len=0,l=src.length,_iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _iterator4=src[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0){var item=_step4.value,img=new Image;img.src=item,img.onload=function(){check(++len)},img.onerror=function(){check(++len)}}}catch(e){_didIteratorError4=!0,_iteratorError4=e}finally{try{!_iteratorNormalCompletion4&&_iterator4.return&&_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4}}function check(e){if(document.getElementById("percentText").innerText=""+(100*parseFloat(e/l)).toFixed(0),e===l){var t=document.getElementById("srcLoading");loadingDynamic(0,6,"dynamic1").then(function(e){_("#dynamic_container").innerHTML=window.template("dynamic_tpl",{dynamics:e.data}),setTimeout(function(){return t.parentNode.removeChild(t)},500)}).catch(function(e){return infoContainer(e)})}}function loadDynamicByPageSize(){_(".dynamicPageSizeList").addEventListener("click",function(e){if(/dynamicPageSizeItem/.test(e.target.className)&&"true"!==e.target.getAttribute("current")){var t=_(".dynamicPageSizeItem"),n=!0,o=!1,r=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;s.className="dynamicPageSizeItem",s.setAttribute("current",!1)}}catch(e){o=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}e.target.className="dynamicPageSizeItem currentPage",e.target.setAttribute("current",!0),loadingUI("start");var l=6*(Number(e.target.innerText)-1);loadingDynamic(l,l+6,"dynamic"+e.target.innerText).then(function(e){loadingUI("end"),_("#dynamic_container").innerHTML=window.template("dynamic_tpl",{dynamics:e.data}),_(".center_bar").scrollTop=0})}},!1)}function loadingDynamic(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:6,a=arguments[2];return new Promise(function(o,r){if(a&&sessionStorage.getItem(a)){if(o(JSON.parse(sessionStorage.getItem(a))),!_(".dynamicPageSizeItem")||0===_(".dynamicPageSizeItem").length){for(var e=[],t=0;t<Math.round(JSON.parse(sessionStorage.getItem(a)).total/6);t++)e.push(t+1);_(".dynamicPageSizeList").innerHTML=window.template("dynamicPageSize",{list:e})}}else fetch("/getDynamicByPageSize",{method:"POST",headers:{"content-type":"application/json",authorization:Cookies.get("token"),accept:"application/json"},body:JSON.stringify({index:n,pageSize:i})}).then(function(e){return 200<=e.status&&e.status<300?e.json():e.status}).then(function(e){if(e.success){if(!_(".dynamicPageSizeItem")||0===_(".dynamicPageSizeItem").length){for(var t=[],n=0;n<Math.round(e.total/6);n++)t.push(n+1);_(".dynamicPageSizeList").innerHTML=window.template("dynamicPageSize",{list:t})}o(e),sessionStorage&&sessionStorage.setItem(a,JSON.stringify(e))}else r(e&&e.errorMsg||e)}).catch(function(e){return r(e)})})}function getCurrentPageSize(e){if("dynamic"===e){var t=_(".dynamicPageSizeList li"),n=!0,o=!1,r=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;if("true"===s.getAttribute("current"))return s.innerText}}catch(e){o=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}}}var HashRoute=function(){function t(e){_classCallCheck(this,t),this.map=e,this.routes={},this.curUrl=""}return _createClass(t,[{key:"reload",value:function(){this.curUrl=location.hash.substring(0)||"#/index",this.routes[this.curUrl]()}},{key:"init",value:function(){var e=!0,t=!1,n=void 0;try{for(var o,r=this.map[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var i=o.value;this.routes[i.url]=i.map}}catch(e){t=!0,n=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw n}}window.addEventListener("hashchange",this.reload.bind(this))}}]),t}();function hashRouter(){var s=document.querySelectorAll("header .nav li");function e(e){var t=!0,n=!1,o=void 0;try{for(var r,i=s[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var a=r.value;if(a.firstChild.getAttribute("href")===e)return void a.firstChild.click()}}catch(e){n=!0,o=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw o}}}new HashRoute([{url:"#/index",map:function(){return e("#/index")}},{url:"#/article",map:function(){return e("#/article")}},{url:"#/message",map:function(){return e("#/message")}},{url:"#/about",map:function(){return e("#/about")}}]).init()}var Glitch=function(){function t(e){_classCallCheck(this,t),this.option={el:e,zIndexDefault:3,effect1TimeMin:600,effect1TimeMax:900,effect2TimeMin:10,effect2TimeMax:115,time:100}}return _createClass(t,[{key:"randomInt",value:function(e,t){return Math.floor(Math.random()*(t-e+1))+e}},{key:"init",value:function(){var e=this.option.el.cloneNode(!0);e.style.zIndex=""+this.option.zIndexDefault,e.style.position="absolute",e.style.top="0",this.option.el.parentNode.appendChild(e);var t=this.option.el.cloneNode(!0);t.style.position="absolute",t.style.top="0",this.option.el.parentNode.appendChild(t),t.className+=" front-3",t.style["z-index"]=""+(this.option.zIndexDefault+1);var n=this.option.el.cloneNode(!0);n.style.position="absolute",n.style.top="0",this.option.el.parentNode.appendChild(n),n.style["z-index"]=""+(this.option.zIndexDefault+2)}},{key:"setStyle",value:function(e,t){for(var n in t)e.style[n]=t[n];return e}},{key:"mix",value:function(){var e=this.randomInt(10,1900),t=this.randomInt(10,1300),n=this.randomInt(0,40),o=this.randomInt(0,40),r=(Math.random()*(1.1-.9)+.9).toFixed(2);this.randomInt(this.option.effect2TimeMin,this.option.effect2TimeMax);this.setStyle(this.option.el.parentNode.children[1],{clip:"rect("+e+"px, 9999px, "+t+"px,0px)",left:n,right:o,"-webkit-transform":"scale("+r+")","-ms-transform":"scale("+r+")",transform:"scale("+r+")","mix-blend-mode":"hue"})}},{key:"glitch1",value:function(){var e=this.randomInt(10,1900),t=this.randomInt(10,1300),n=this.randomInt(0,16),o=this.randomInt(0,16);this.randomInt(this.option.effect1TimeMin,this.option.effect1TimeMax);this.setStyle(this.option.el.parentNode.children[2],{clip:"rect("+e+"px, 9999px, "+t+"px,0px)",right:o,left:n})}},{key:"glitch2",value:function(){var e=this.randomInt(10,1900),t=this.randomInt(10,1300),n=this.randomInt(0,40),o=this.randomInt(0,40),r=(this.randomInt(this.option.effect2TimeMin,this.option.effect2TimeMax),(Math.random()*(1.1-.9)+.9).toFixed(2));this.setStyle(this.option.el.parentNode.children[3],{clip:"rect("+e+"px, 9999px, "+t+"px,0px)",left:n,right:o,"-webkit-transform":"scale("+r+")","-ms-transform":"scale("+r+")",transform:"scale("+r+")"})}},{key:"start",value:function(){var e=this;this.init(),setInterval(function(){e.glitch1(),e.glitch2(),e.mix()},this.option.time)}}]),t}();function exitLoginRegCancel(){document.getElementsByClassName("exit")[0].onclick=function(){exitLoginRegFace()}}function loginFn(a){var s=new RegisterClass(a),l=document.getElementsByClassName("registerInfo"),c=document.getElementsByClassName("loginInfo")[0],u=(document.getElementsByClassName("login_register")[0],new Date(-1));_(".new_login","click",function(){var e=this.children[1].innerText;if(showLoginRegFace(),/登陆/.test(e)){var t=!0,n=!(document.getElementById("login").style.display="block"),o=void 0;try{for(var r,i=l[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){r.value.style.display="none"}}catch(e){n=!0,o=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw o}}c.style.display="block",s.signUp()}else document.cookie="user="+a+"; path=/; expires="+u,sessionStorage.removeItem("user"),setTimeout(function(){window.location.reload()},1e3)})}function setStyle(e,t){for(var n in t)e.style[n]=t[n];return e}function showLoginRegFace(){var e=document.getElementsByClassName("login_register")[0],i=document.getElementsByClassName("bar"),a=document.getElementsByClassName("login-effect")[0];setStyle(e,{display:"block","z-index":"999"}),setTimeout(function(){var e=!0,t=!1,n=void 0;try{for(var o,r=i[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){toggleClass(o.value,"showBar")}}catch(e){t=!0,n=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw n}}toggleClass(a,"setLogin")},10)}function toggleClass(el,name){var className=el.className;eval("/"+name+"/").test(className)?el.className=className.replace(eval("/"+name+"/g"),""):el.className=className+" "+name}function register(){var i=new RegisterClass,a=document.getElementById("login"),s=document.getElementsByClassName("registerInfo");_(".new_register","click",function(){var e=!0,t=!(a.style.display="none"),n=void 0;try{for(var o,r=s[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){o.value.style.display="block"}}catch(e){t=!0,n=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw n}}document.getElementsByClassName("loginInfo")[0].style.display="none",showLoginRegFace(),i.reg(),i.signUp()})}var RegisterClass=function(){function t(e){_classCallCheck(this,t),void 0===e&&(e="Ada"),this.name=e}return _createClass(t,[{key:"reg",value:function(){document.getElementById("register").onclick=function(){var e=document.getElementById("username").value,t=document.getElementById("check_password").value,n=document.getElementById("password").value;/\s/.test(e)?infoContainer("用户名不能包含空格",!1):30<e.length?infoContainer("用户名字符长度不能超过30",!1):/\s/.test(n)?infoContainer("密码不能包含空格",!1):e!==self.name&&""!==e?""!==n?n&&n.length<6||n&&15<n.length?infoContainer("密码长度:6-15位",!1):n===t?fetch("/register",{method:"POST",headers:{"content-type":"application/json",authorization:Cookies.get("token"),accept:"application/json"},body:JSON.stringify({name:e,pwd:window.Base64.encode(t)})}).then(function(e){return 200<=e.status&&e.status<300?e.json():e}).then(function(e){e&&e.success?infoContainer("注册成功，请登录",!0,function(){return setLogin()}):infoContainer(e&&e.errorMsg||"网络出错"+e.status)}):infoContainer("两次密码不一致",!1):infoContainer("请输入密码",!1):infoContainer("请输入用户名",!1)}}},{key:"signUp",value:function(){document.getElementById("login").onclick=function(){var v=document.getElementById("username").value,e=document.querySelectorAll(".register input[type=checkbox]")[0].checked,t=document.getElementById("password").value;""!==v?""!==t?fetch("/login",{method:"POST",headers:{"content-type":"application/json",authorization:Cookies.get("token"),accept:"application/json"},credentials:"include",body:JSON.stringify({name:v,pwd:window.Base64.encode(t),state:e})}).then(function(e){return 200<=e.status&&e.status<300?e.json():e}).then(function(e){if(e&&e.success){var t=document.getElementsByClassName("user_name")[0],n=document.getElementsByClassName("showLoginSuccess");window.sessionStorage&&sessionStorage.getItem("user")&&sessionStorage.removeItem("user"),sessionStorage&&sessionStorage.setItem("user",window.Base64.encode(v)),t.innerText=v;var o=!0,r=!1,i=void 0;try{for(var a,s=_("._new_register")[Symbol.iterator]();!(o=(a=s.next()).done);o=!0){a.value.style.display="none"}}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}if(exitLoginRegFace(),repeatCon(v),uploadAvatar(window.Base64.decode(sessionStorage.getItem("user"))),getAvatar(window.Base64.decode(sessionStorage.getItem("user"))),750<window.innerWidth){var l=!0,c=!1,u=void 0;try{for(var d,f=n[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){d.value.style.display="block"}}catch(e){c=!0,u=e}finally{try{!l&&f.return&&f.return()}finally{if(c)throw u}}}if(e.avatar){var g=!0,m=!1,p=void 0;try{for(var y,h=document.getElementsByClassName(".avatar_img")[Symbol.iterator]();!(g=(y=h.next()).done);g=!0){y.value.src=e.avatar}}catch(e){m=!0,p=e}finally{try{!g&&h.return&&h.return()}finally{if(m)throw p}}}_(".avatarTip").style.display=/default_avatar.jpg/.test(e.avatar)?"block":"none",messageOperation(v),e.admin&&(adminToggle(),publishDynamic(),publishItem(),deleteDynamic(),deleteArticle(),updateArticle(),editDynamic(),adminUI()),document.querySelectorAll(".new_login span")[0].innerText="注销",document.querySelectorAll(".new_login span")[1].innerText="注销",loginFn()}else infoContainer(e&&e.errorMsg||"网络错误"+e.status)}):infoContainer("请输入密码",!1):infoContainer("请输入用户名",!1)}}}]),t}();function exitLoginRegFace(){var i=document.getElementsByClassName("bar"),a=document.getElementsByClassName("login_register")[0];toggleClass(document.getElementsByClassName("login-effect")[0],"setLogin"),setTimeout(function(){var e=!0,t=!1,n=void 0;try{for(var o,r=i[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){toggleClass(o.value,"showBar")}}catch(e){t=!0,n=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw n}}setTimeout(function(){setStyle(a,{"z-index":"0",display:"none"})},1e3)},650)}function setLogin(){var e=document.getElementsByClassName("setLoginItem"),t=!0,n=!(_("#register").style.display="none"),o=void 0;try{for(var r,i=e[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){r.value.style.display="block"}}catch(e){n=!0,o=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw o}}document.getElementById("check_password").style.display="none",document.getElementsByClassName("login-effect")[0].style.height="267px"}function messageCount(e){var t=document.querySelectorAll(".repeatCount");t[0].innerText=e+"评论",t[1].innerText=e+"人参与"}function removeClass(el,name){eval("/"+name+"/").test(el.getAttribute("class"))&&(el.className=el.className.replace(eval("/"+name+"/g"),""))}function addClass(el,name){eval("/"+name+"/").test(el.getAttribute("class"))||(el.className+=" "+name)}function showArticle(){var c=document.querySelectorAll(".article_list .article");_(".article_list .article","click",function(e){"block"===document.querySelector(".context-menu").style.display&&(document.querySelector(".context-menu").style.display="none");var t=!0,n=!1,o=void 0;try{for(var r,i=c[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var a=r.value;removeClass(a,"showArticle"),removeClass(a.childNodes[7],"toggleP"),removeClass(a.childNodes[3],"showClose")}}catch(e){n=!0,o=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw o}}_(".articleDetalContainer").style.display="block",_(".articleDetail").innerHTML=this.innerHTML,_(".articleDetail").style.background=this.style.background,_(".articleDetail").scrollTop=0;var s=this.getAttribute("_id"),l=this.childNodes[1].children[1];updateViewer(s,Number(l.innerText),l.childNodes[1],this),addClass(this,"showArticle"),addClass(this.childNodes[3],"showClose"),addClass(this.childNodes[7],"toggleP"),showArticlePrepare(this.childNodes[3]),closeArticle(this),e.stopPropagation()}),_(".articleDetalContainer").addEventListener("click",function(e){/articleDetalContainer/.test(e.target.className)&&(this.style.display="none")})}function updateViewer(e,t,n,o){o.isClick||fetch("/updateArticleViewerById",{method:"POST",headers:{"content-type":"application/json",authorization:Cookies.get("token"),accept:"application"},body:JSON.stringify({_id:e,viewer:t})}).then(function(e){if(e.json)return e.json()}).then(function(e){e&&e.success&&(n.innerText=String(t+1),o.isClick=!0)})}function showArticlePrepare(e){addClass(document.querySelectorAll(".right_article_list")[0],"rightArticleHide"),e.style.display="block"}function closeArticle(t,e){t.childNodes[3].onclick=function(e){removeClass(t,"showArticle"),removeClass(t.childNodes[7],"toggleP"),removeClass(document.querySelectorAll(".right_article_list")[0],"rightArticleHide"),(e=e||window.event).stopPropagation(),document.querySelector(".context-menu").style.display="none",removeClass(this,"showClose")}}function selectNav(){var e=document.querySelectorAll("header .nav li a"),m=document.querySelectorAll(".screen main .all .face"),p=document.querySelectorAll(".screen main .all .face:nth-of-type(3) .message_box .message_list .message_item p.message_content"),y=document.querySelectorAll(".screen main .all .face:nth-of-type(3) .message_box .message_list .message_item .user"),h=document.querySelectorAll(".screen main .all .face:nth-of-type(2) .article_list li .article-info"),v=document.querySelectorAll(".screen main .all .face:nth-of-type(2) .article_list li .article_summary h2:nth-of-type(1)"),b=document.querySelectorAll(".screen main .all .center_bar .dynamic li.dynamic_item .title"),x=document.querySelectorAll(".screen main .all .center_bar .dynamic li.dynamic_item .summary");addClass(m[0],"face1"),_(".leave_message","click",function(){e[2].click()});for(var t=function(g){e[g].onclick=function(){if(removeClass(m[0],"face1"),2===g)for(var e=0;e<y.length;e++)addClass(y[e],"titleShow"),addClass(p[e],"titleShow");else for(var t=0;t<y.length;t++)removeClass(y[t],"titleShow"),removeClass(p[t],"titleShow");if(0===g)for(var n=0;n<b.length;n++)addClass(b[n],"titleShow"),addClass(x[n],"titleShow");else for(var o=0;o<b.length;o++)removeClass(b[o],"titleShow"),removeClass(x[o],"titleShow");if(1===g)for(var r=0;r<v.length;r++)addClass(v[r],"titleShow"),addClass(h[r],"titleShow");else for(var i=0;i<v.length;i++)removeClass(v[i],"titleShow"),removeClass(h[i],"titleShow");if(3===g){var a=this;if(!this.isIntroduce){var s=document.getElementById("introduce_textarea");fetch("/introduce",{method:"POST",headers:{accept:"application/json","content-type":"application/json",authorization:Cookies.get("token")}}).then(function(e){return 200<=e.status&&e.status<300?e.json():e.status}).then(function(e){e&&e.success&&(introduce(0,e.introduce),s.value=e.introduce,a.isIntroduce=!0)}).catch(function(e){return infoContainer(e&&e.errorMsg||e)})}}var l=!0,c=!1,u=void 0;try{for(var d,f=m[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){removeClass(d.value,"faceShow")}}catch(e){c=!0,u=e}finally{try{!l&&f.return&&f.return()}finally{if(c)throw u}}addClass(m[g],"faceShow")}},n=0;n<e.length;n++)t(n)}function loading(){for(var i=document.querySelectorAll(".loading_dot div"),o=[],e=i.length,a=document.getElementsByClassName("loading_btn")[0],t=0;t<e;t++)o.push(i[t].offsetTop);a.onmouseup=function(){var e=!0,t=!1,n=void 0;try{for(var o,r=i[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){o.value.style.display="block"}}catch(e){t=!0,n=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw n}}return a.style.top="30px",window.onmousemove=null,!(window.onmouseup=function(){var e=!0,t=!1,n=void 0;try{for(var o,r=i[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){o.value.style.display="block"}}catch(e){t=!0,n=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw n}}return a.style.top="30px",window.onmousemove=null,!1})},a.onmousedown=function(e){var n=(e=e||window.event).clientY;window.onmousemove=function(e){var t=(e=e||window.event).clientY-n+25;return eatDot(o,t-25,i),a.style.top=t+"px",checkLoadingFinished(t),!1}}}function checkLoadingFinished(e){var t=document.getElementsByClassName("loading_center_box")[0],n=document.querySelectorAll(".loadingY");if(280<=e){var o=!(window.onmousemove=null),r=!(t.style.display="none"),i=void 0;try{for(var a,s=n[Symbol.iterator]();!(o=(a=s.next()).done);o=!0){a.value.style.height="0"}}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}setTimeout(function(){document.getElementsByClassName("loading")[0].style.display="none"},1e3),addClass(document.getElementsByClassName("screen")[0],"screenShow")}}function eatDot(e,t,n){for(var o=e.length,r=0;r<o;r++)t>=e[r]?n[r].style.display="none":n[r].style.display="block"}function loginWarning(){document.querySelector(".menu_toggle").onclick=function(){removeClass(document.querySelectorAll(".new_login")[1],"tada"),setTimeout(function(){return addClass(document.querySelectorAll(".new_login")[1],"tada")})}}function uploadAvatar(n){if(!(void 0===n||30<=n.length)){var e=document.getElementById("avatar"),a=document.getElementsByClassName("avatar_img");e.addEventListener("change",function(){var e=this.files[0],i=e.name;if(/image\/\w+/.test(e.type)){var t=new FileReader;t.readAsBinaryString(e),t.onload=function(){var e=this.result;fetch("/set-avatar",{method:"POST",body:JSON.stringify({avatar:e,name:n,fileName:i}),headers:{Accept:"application/json","content-type":"application/json",authorization:Cookies.get("token")}}).then(function(e){return e.status<=200&&e.status<300?e.json():e}).then(function(e){e&&e.success?infoContainer("更新头像成功",!0,function(){var e=!0,t=!1,n=void 0;try{for(var o,r=a[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){o.value.src="/upload/user_avatar/"+i}}catch(e){t=!0,n=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw n}}}):infoContainer(e&&e.errorMsg||"网络出错 "+e.status)})}}else infoContainer("请确保文件为图像类型",!1)},!1)}}function getAvatar(e){if(!(void 0===e||100<=e.length)){var a=document.getElementsByClassName("avatar_img");fetch("/get-avatar",{method:"POST",headers:{"content-type":"application/json",authorization:Cookies.get("token"),accept:"application/json"},body:JSON.stringify({name:window.Base64.encode(JSON.stringify({name:e}))})}).then(function(e){return 200<=e.status&&e.status<300?e.json():e}).then(function(e){if(e&&e.success){var t=!0,n=!1,o=void 0;try{for(var r,i=a[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){r.value.src=e.data}}catch(e){n=!0,o=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw o}}_(".avatarTip").style.display=/default_avatar.jpg/.test(e.data)?"block":"none"}else infoContainer(e&&e.errorMsg||"网络出错"+e.status,!1)})}}function repeatCon(i){document.querySelectorAll(".message_list")[0].addEventListener("click",function(e){var t=e||window.event;if(/repeat_msg/.test(t.target.className)){var n=t.target.getAttribute("_to_repeat"),o=window.sessionStorage&&sessionStorage.getItem("user")&&window.Base64.decode(sessionStorage.getItem("user"))||i;if(void 0===o||30<=o.length)return void infoContainer("你还没有登陆",!1);if(o===n)return void infoContainer("自己回复自己不太好吧",!1);var r=t.target.getAttribute("_id");o?sendRepeat(function(e,t){console.log({info:t,name:o,date:e,toRepeat:n}),fetch("/repeatMsg",{method:"POST",headers:{"content-type":"application/json",authorization:Cookies.get("token"),accept:"application/json"},body:JSON.stringify({_id:r,msg:{info:t,name:o,date:e,toRepeat:n}})}).then(function(e){return 200<=e.status&&e.status<300?e.json():e.status}).then(function(e){loadingUI("end"),e&&e.success?(document.querySelectorAll(".repeat_word")[0].value="",reRenderMsg(e.data),document.querySelectorAll(".cancel_repeat")[0].click()):infoContainer(e&&e.errorMsg||"网络繁忙"+e)})}):infoContainer("你还没有登陆",!1)}},!1)}function escapeMessage(e){return e?e.replace(/<\/?script>+|傻逼+|爸爸+|你爸+|SB+|sB+|sb+|操+|你妈/g,"**"):""}function sendRepeat(s){var e=document.querySelectorAll(".repeat_con")[0];_(".repeat_over").style.display="block",addClass(e,"bounceIn"),document.querySelectorAll(".cancel_repeat")[0].onclick=function(){_(".repeat_over").style.display="none",removeClass(e,"bounceIn")},document.querySelectorAll(".submit_repeat")[0].onclick=function(){var e=escapeMessage(document.querySelectorAll(".repeat_word")[0].value),t=new Date,n=t.getMinutes(),o=n<10?n+1:"0"+n,r=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds(),i=t.getHours()<10?"0"+t.getHours():t.getHours(),a=t.getFullYear()+"/"+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"/"+(t.getDate()<10?"0"+t.getDate():t.getDate())+" "+i+":"+o+":"+r;""!==e&&""!==e.trim()?280<e.length?infoContainer("内容不能超过280字",!1):(loadingUI("start"),s&&s(a,e)):infoContainer("回复内容不能为空",!1)}}function messageOperation(e){e=e||sessionStorage&&sessionStorage.getItem("user")||void 0;var t=document.querySelectorAll(".message_list")[0];t.onclick=function(e){var t=e||window.event;if(/delete_msg/.test(t.target.className)){if(!sessionStorage.getItem("user"))return void infoContainer("你还没有登录",!1);var n=t.target.getAttribute("_id"),o=t.target,r=this;if(!sessionStorage.getItem("user"))return void infoContainer("你还没有登录",!1);loadingUI("start"),fetch("/deleteMsgById",{method:"POST",headers:{"content-type":"application/json",authorization:Cookies.get("token"),accept:"application/json"},body:JSON.stringify({_id:n,operator:window.Base64.decode(sessionStorage.getItem("user"))})}).then(function(e){return 200<=e.status&&e.status<300?e.json():e.status}).then(function(e){if(loadingUI("end"),e&&e.success){var t=_(".temp_ul li:first-of-type");_(".temp_ul li:first-of-type").innerText=parseInt(t.innerText)-1+"评论",_(".temp_ul li:last-of-type").innerText=parseInt(t.innerText)-1+"人参与",infoContainer("删除成功",!0),r.removeChild(o.parentNode.parentNode)}else infoContainer(e&&e.errorMsg||"网络繁忙"+e,!1)})}},isAdmin(e,function(){t.addEventListener("click",function(e){var t=e||window.event;if(/delete_msg/.test(t.target.className)){var n=t.target.getAttribute("_id"),o=t.target,r=this;if(!sessionStorage.getItem("user"))return void infoContainer("你还没有登录",!1);loadingUI("start"),fetch("/deleteMsgById",{method:"POST",headers:{"content-type":"application/json",authorization:Cookies.get("token"),accept:"application/json"},body:JSON.stringify({_id:n})}).then(function(e){return 200<=e.status&&e.status<300?e.json():e.status}).then(function(e){if(loadingUI("end"),e&&e.success){var t=_(".temp_ul li:first-of-type");_(".temp_ul li:first-of-type").innerText=parseInt(t.innerText)-1+"评论",_(".temp_ul li:last-of-type").innerText=parseInt(t.innerText)-1+"人参与",infoContainer("删除成功",!0),r.removeChild(o.parentNode.parentNode)}else infoContainer(e&&e.errorMsg||"网络繁忙"+e)})}},!1)}).catch(function(e){})}function isAdmin(e,o){return new Promise(function(t,n){e&&""!==e||n(),fetch("/checkAdmin",{method:"POST",headers:{"content-type":"application/json",authorization:Cookies.get("token"),accept:"application/json"},body:JSON.stringify({name:window.Base64.encode(JSON.stringify({name:e}))})}).then(function(e){return 200<=e.status&&e.status<300?e.json():e.status}).then(function(e){e&&e.success?(t(e.data),o&&o()):n(e&&e.errorMsg||"获取权限失败"+e)})})}function checkPerssion(e){e&&null!=window.Base64.decode(e)?isAdmin(e).then(function(e){e&&(adminToggle(),publishDynamic(),publishItem(),deleteDynamic(),deleteArticle(),updateArticle(),editDynamic(),deleteDynamicRepeat(!0),adminUI())}).catch(function(t){var e=document.querySelectorAll(".menu_toggle"),n=!0,o=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){i.value.addEventListener("click",function(e){return infoContainer(t,!1)})}}catch(t){o=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}deleteDynamicRepeat(!1)}):deleteDynamicRepeat(!1)}function adminUI(){var e=document.querySelectorAll(".deleteDynamicRepeat"),t=document.querySelectorAll(".delete_msg"),n=!0,o=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){i.value.style.cursor="pointer"}}catch(e){o=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}var s=!0,l=!1,c=void 0;try{for(var u,d=t[Symbol.iterator]();!(s=(u=d.next()).done);s=!0){u.value.style.cursor="pointer"}}catch(e){l=!0,c=e}finally{try{!s&&d.return&&d.return()}finally{if(l)throw c}}}function deleteDynamicRepeat(e){var t=document.querySelectorAll(".deleteDynamicRepeat"),n=!0,o=!1,r=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){i.value.style.cursor=e?"pointer":"not-allowed"}}catch(e){o=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}e&&document.querySelectorAll(".dynamic")[0].addEventListener("click",function(e){if(/deleteDynamicRepeat/.test(e.target.className)){var t=e.target.getAttribute("_id"),n=e.target.getAttribute("_msgid"),o=e.target.parentNode;loadingUI("start"),fetch("/deleteDynamicMsg",{method:"POST",headers:{"content-type":"application/json",authorization:Cookies.get("token"),accept:"application/json"},body:JSON.stringify({_id:t,msgId:n})}).then(function(e){return 200<=e.status&&e.status<300?e.json():e.status}).then(function(e){loadingUI("end"),e&&e.success?(infoContainer("删除成功",!0),o.parentNode.removeChild(o)):infoContainer("删除失败"+e&&e.errorMsg||e)})}},!1)}function loginState(){var e=document.cookie.split("; "),t=[],n=document.querySelectorAll(".all_user span");for(var o in e)t.push(e[o].split("="));var r=0;loginFn();var i=!0,a=!1,s=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;if("user"===u[0]||window.sessionStorage&&sessionStorage.getItem("user")){var d=!0,f=!1,g=void 0;try{for(var m,p=_("._new_register")[Symbol.iterator]();!(d=(m=p.next()).done);d=!0){m.value.style.display="none"}}catch(e){f=!0,g=e}finally{try{!d&&p.return&&p.return()}finally{if(f)throw g}}window.sessionStorage&&!sessionStorage.getItem("user")&&sessionStorage.setItem("user",u[1]),rememberLoginState(window.Base64.decode(sessionStorage.getItem("user")||u[1]));var y=!0,h=!1,v=void 0;try{for(var b,x=n[Symbol.iterator]();!(y=(b=x.next()).done);y=!0){b.value.innerText="注销"}}catch(e){h=!0,v=e}finally{try{!y&&x.return&&x.return()}finally{if(h)throw v}}return getAvatar(window.Base64.decode(sessionStorage.getItem("user")||u[1])),repeatCon(window.Base64.decode(sessionStorage.getItem("user")||u[1])),uploadAvatar(window.Base64.decode(sessionStorage.getItem("user")||u[1])),document.querySelector("#avatar").style.display="block",messageOperation(window.Base64.decode(sessionStorage.getItem("user")||u[1])),void checkPerssion(window.Base64.decode(sessionStorage.getItem("user")||u[1]))}r++}}catch(e){a=!0,s=e}finally{try{!i&&c.return&&c.return()}finally{if(a)throw s}}if(r===t.length){loginWarning(),getAvatar("Ada"),messageOperation(void 0),repeatCon(void 0);var S=!0,w=!(document.querySelector("#avatar").style.display="none"),C=void 0;try{for(var k,A=n[Symbol.iterator]();!(S=(k=A.next()).done);S=!0){k.value.innerText="登陆"}}catch(e){w=!0,C=e}finally{try{!S&&A.return&&A.return()}finally{if(w)throw C}}document.querySelector(".user_name").innerText="Ada",checkPerssion(sessionStorage&&sessionStorage.getItem("user")&&window.Base64.decode(sessionStorage.getItem("user"))||void 0)}}function _(e,t,n){var o=document.querySelectorAll(e);if(!n&&!t)return 1<o.length?o:o[0];if(t&&n){var r=!0,i=!1,a=void 0;try{for(var s,l=o[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=s.value;c.addEventListener(t,n.bind(c),!1)}}catch(e){i=!0,a=e}finally{try{!r&&l.return&&l.return()}finally{if(i)throw a}}}if(!t&&n){var u=!0,d=!1,f=void 0;try{for(var g,m=o[Symbol.iterator]();!(u=(g=m.next()).done);u=!0){var p=g.value;n.call(p)}}catch(e){d=!0,f=e}finally{try{!u&&m.return&&m.return()}finally{if(d)throw f}}}}function adminToggle(){document.querySelector("#editIntroduce").onclick=function(){var e=document.querySelector("#introduce_textarea").value;300<=e.length?infoContainer("不能超过300个字符",!1):""!==e.trim()?fetch("/updateIntroduce",{method:"POST",headers:{"content-type":"application/json",authorization:Cookies.get("token"),accept:"application/json"},body:JSON.stringify({introduce:e})}).then(function(e){return 200<=e.status&&e.status<300?e.json():e.status}).then(function(e){e&&e.success?infoContainer("更新成功",1):infoContainer(e,!1)}).catch(function(e){return infoContainer(e&&e.errorMsg||e)}):infoContainer("不能为空",!1)},_(".adminMobile","click",function(){_(".menu_toggle").click()}),document.querySelector(".menu_toggle").onclick=function(){_(".admin",!1,function(){toggleClass(this,"adminToggle")}),_("header",!1,function(){toggleClass(this,"headerToggle")}),_("main",!1,function(){toggleClass(this,"mainToggle")}),_(".menu_toggle",!1,function(){toggleClass(this,"btnToggle")}),_(".adminContainer",!1,function(){toggleClass(this,"showADminContainer")});var n=_(".admin_menu li");if(/adminToggle/.test(_(".admin").className))_(".admin_menu li:nth-of-type(1) a").click(),setTimeout(function(){for(var e=function(e){setTimeout(function(){addClass(n[e],"liShow")},300*e)},t=0;t<n.length;t++)e(t);_(".edit_ui",!1,function(){addClass(this,"uiFromRight")})},300);else{_(".edit_ui",!1,function(){removeClass(this,"uiFromRight")});var e=!0,t=!1,o=void 0;try{for(var r,i=n[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){removeClass(r.value,"liShow")}}catch(e){t=!0,o=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw o}}}}}function rememberLoginState(e){_(".user_name").innerHTML=e,_(".loading").style.display="none",addClass(document.getElementsByClassName("screen")[0],"screenShow")}function infoContainer(e,t,n){_("._result-info p").innerText=e,setTimeout(function(){t?(_("._result-info",!1,function(){removeClass(this,"false_dialog"),addClass(this,"true_dialog")}),_("._result-info i",!1,function(){this.style.color="#52c41a",this.innerHTML="&#xe6b3;"})):(_("._result-info i",!1,function(){this.style.color="#f5222d",this.innerHTML="&#xe67a;"}),_("._result-info",!1,function(){removeClass(this,"true_dialog"),addClass(this,"false_dialog")}))},0),_(".result_info_mask").style.display="block",setTimeout(function(){_(".result_info_mask").style.display="none",n&&n()},2500)}function handleDynamicImg(){_(".dynamicUpload").addEventListener("change",function(){var e=this.files[0],t=e.name;if(/image\/\w+/.test(e.type)){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){_(".uploadView").src=this.result,_(".uploadView").setAttribute("name",t)}}else infoContainer("请确保文件为图像类型",!1)},!1)}function publishDynamic(){handleDynamicImg(),_("#publish_dw","click",function(){var t=_("#dw_title").value,n=_("#short_article_textarea").value,o=parseInt(_(".edit_li span").innerHTML),e=new Date,r=e.getFullYear()+"-"+(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(e.getDate()<10?"0"+e.getDate():e.getDate()),i={title:t,summary:n},a=_(".uploadView").src,s=_(".uploadView").getAttribute("name");if(300<a.length)return loadingUI("start"),void fetch("/setDynamicImg",{method:"POST",headers:{"content-type":"application/json",authorization:Cookies.get("token"),accept:"application/json"},body:JSON.stringify({name:s,dataUrl:a})}).then(function(e){return loadingUI("end"),200<=e.status&&e.status<300?e.json():e}).then(function(e){if(e.success)if(checkBeforePublish(i)){if(o<0)return void infoContainer("文字超出限制",!1);loadingUI("start"),fetch("/addDynamic",{method:"POST",headers:{"content-type":"application/json",authorization:Cookies.get("token"),accept:"application/json"},body:JSON.stringify({img:e.img,title:t,content:n,date:r,upvote:1})}).then(function(e){return 200<=e.status&&e.status<300?e.json():e}).then(function(e){loadingUI("end"),e&&e.success?(infoContainer("成功,你可以继续发布",!(_(".uploadView").src="")),reRenderDynamic(e.data.reverse()),_("#dw_title").value="",_("#short_article_textarea").value=""):infoContainer(e&&e.errorMsg||"网络繁忙"+e.status)})}else infoContainer("输入不完整",!1);else infoContainer(e&&e.errorMsg||e)});if(checkBeforePublish(i)){if(o<0)return void infoContainer("文字超出限制",!1);loadingUI("start"),fetch("/addDynamic",{method:"POST",headers:{"content-type":"application/json",authorization:Cookies.get("token"),accept:"application/json"},body:JSON.stringify({title:t,content:n,date:r,upvote:1})}).then(function(e){return 200<=e.status&&e.status<300?e.json():e}).then(function(e){loadingUI("end"),e&&e.success?(infoContainer("成功,你可以继续发布",!0),reRenderDynamic(e.data.reverse()),_("#dw_title").value="",_("#short_article_textarea").value=""):infoContainer(e&&e.errorMsg||"网络繁忙"+e.status)})}else infoContainer("输入不完整",!1)})}function reRenderDynamic(e){for(var t=template("dynamic_tpl",{dynamics:e}),n=_(".dynamic .dynamic_item"),o=_(".all_short_article li"),r=0;r<n.length;r++)n[r].parentNode.removeChild(n[r]),o[r].parentNode.removeChild(o[r]);_("#dynamic_container").innerHTML=t;var i=template("dynamic_operation_tpl",{dynamics:e});_(".all_short_article").innerHTML=i}function checkBeforePublish(e){var t=!0;for(var n in e)if(""===e[n].trim()){t=!1;break}return t}function publishItem(){for(var a={url:null},s=_(".map_li"),e=_(".admin_menu li a"),t=function(i){e[i].addEventListener("click",function(){_(".select_line").style.transform="translateY("+40*i+"px)";var e=!0,t=!1,n=void 0;try{for(var o,r=s[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){o.value.style.display="none"}}catch(e){t=!0,n=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw n}}4!==i&&(s[i].style.display="block"),0===i?(a.url="saveDw",a.type="content"):2===i?(a.url="saveArticle",a.type="summary"):4===i?_(".menu_toggle").click():a.url=null},!1)},n=0;n<e.length;n++)t(n);_(".publish-edit","click",function(){if("type"!==this.getAttribute("type")){var e=_(".editor-container").innerHTML,t=_(".ql-editor")[0];console.log(t),t.querySelector("h2")?publishBtn(a,e,window.loadingUI):infoContainer("标题需被h2标签包裹",!1)}})}function cancleTextEdit(){_(".article_list .ql-editor",!1,function(){this.setAttribute("contentEditable",!1)})}function escapeData(e){return e.replace(/<input\stype="text"\sdata-formula="e=mc\^2"\sdata-link="quilljs\.com"\sdata-video="Embed\sURL">/g,"").replace(/<input\stype="text"\sdata-formula="e=mc\^2"\sdata-link="quilljs\.com"\sdata-video="Embed\sURL"\splaceholder="Embed\sURL">/g,"")}function setArticleType(){var e=_(".article-type input"),t="HTML",n=!0,o=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;s.checked&&(t=s.value)}}catch(e){o=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}return t}function publishBtn(e,t,n){if(null!==e.url){var o=new Date;if("saveDw"===e.url)o.getFullYear(),o.getMonth(),o.getDate();else{if("saveArticle"!==e.url)return;var r=o.getMonth()+1,i=o.getDate(),a=(r<10?"0"+r:r)+"-"+(i<10?"0"+i:i),s=""+o.getFullYear(),l=(o.getHours()<10?"0"+o.getHours():o.getHours())+":"+(o.getMinutes()<10?"0"+o.getMinutes():o.getMinutes())+":"+(o.getSeconds()<10?"0"+o.getSeconds():o.getSeconds());n("start"),fetch("/"+e.url,{method:"POST",headers:{"content-type":"application/json",authorization:Cookies.get("token"),accept:"application/json"},body:JSON.stringify({time:l,date:a,year:s,summary:escapeData(t),type:setArticleType()})}).then(function(e){return 200<=e.status&&e.status<300?e.json():e.status}).then(function(e){n("end"),e&&e.success?infoContainer("发布成功",!0,function(){return window.location.reload()}):infoContainer(e&&e.errorMsg||"网络繁忙"+e)})}}}function shortArticleLimited(){var e=!0,t=!1,n=void 0;try{for(var o,r=["change","keydown","keyup"][Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var i=o.value;_("#short_article_textarea").addEventListener(i,function(e){e=e||window.event;var t=180-this.value.length;(_(".count").innerHTML=t)<=0&&8!=e.keyCode&&e.preventDefault()},!1)}}catch(e){t=!0,n=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw n}}}function deleteDynamic(){_(".all_short_article","click",function(e){if(/delete_dynamic/.test(e.target.parentNode.className)){var l=e.target.parentNode.parentNode,t=e.target.parentNode.getAttribute("_id");fetch("/deleteDynamic",{method:"POST",headers:{"content-type":"application/json",authorization:Cookies.get("token"),accept:"application/json"},body:JSON.stringify({_id:t})}).then(function(e){return e.json()}).then(function(e){if(e&&e.success){l.parentNode.removeChild(l),infoContainer("删除成功",!0);var t=template("dynamic_tpl",{dynamics:e.data.reverse()}),n=!0,o=!1,r=void 0;try{for(var i,a=_(".dynamic li")[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;_(".dynamic").removeChild(s)}}catch(e){o=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}_(".dynamic").innetHTML=t}else infoContainer(e&&e.errorMsg||"网络繁忙",!1)})}})}function deleteArticle(){_(".o_all_article","click",function(e){if(/delete_article/.test(e.target.parentNode.className)){var t=e.target.parentNode.getAttribute("_id"),n=e.target.parentNode.parentNode;loadingUI("start"),fetch("/deleteArticle",{method:"POST",headers:{"content-type":"application/json",authorization:Cookies.get("token"),accept:"application/json"},body:JSON.stringify({_id:t})}).then(function(e){return 200<=e.status&&e.status<300?e.json():e}).then(function(e){loadingUI("end"),e&&e.success?(n.parentNode.removeChild(n),infoContainer("删除成功",!0,function(){return window.location.reload()})):infoContainer(e&&e.errorMsg||"网络出错"+e.status)})}})}function loadingUI(e){"start"===e?(addClass(_(".screen"),"blurBg"),_(".loadingUI").style.display="block"):"end"===e&&(removeClass(_(".screen"),"blurBg"),_(".loadingUI").style.display="none")}function leaveMsg(){_(".leave_msg","click",function(){var e=escapeData(_(".msg").value),t=window.sessionStorage&&sessionStorage.getItem("user"),n=new Date,o=n.getMinutes(),r=o<10?"0"+o:o,i=n.getHours(),a=i<10?"0"+i:i,s=n.getFullYear(),l=n.getMonth()+1,c=l<10?"0"+l:l,u=n.getDate(),d=s+"-"+c+"-"+(u<10?"0"+u:u)+"-----"+a+" : "+r;""!==e?t?(loadingUI("start"),fetch("/leaveMessage",{method:"POST",headers:{"content-type":"application/json",authorization:Cookies.get("token"),accept:"application/json"},body:JSON.stringify({date:d,content:e,name:window.Base64.decode(t)})}).then(function(e){return 200<=e.status&&e.status<300?e.json():e.status}).then(function(e){loadingUI("end"),e&&e.success?reRenderMsg(e.data,!0):infoContainer(e&&e.errorMsg||"网络繁忙"+e)})):infoContainer("你还没有登陆",!1):infoContainer("留言不能为空 ~",!1)})}function reRenderMsg(e,t){infoContainer("成功啦",!0);var n=!(_(".msg").value=""),o=!(_(".msg_word_count span").innerText="280"),r=void 0;try{for(var i,a=_(".message_list li")[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;s.parentNode.removeChild(s)}}catch(e){o=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}var l=template("message-tpl",{messages:e instanceof Array&&e.reverse()});_(".message_list").innerHTML=l,t&&(_(".temp_ul li:first-of-type").innerText=e.length+"评论",_(".temp_ul li:last-of-type").innerText=e.length+"人参与"),_(".message_content",!1,function(){addClass(this,"titleShow")}),_("._user",!1,function(){addClass(this,"titleShow")}),allUserAvatar()}function wordLimited(){var e=!0,t=!1,n=void 0;try{for(var o,r=["change","keydown","keyup"][Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var i=o.value;_("#msg").addEventListener(i,function(e){e=e||window.event;var t=280-this.value.length;(_(".msg_count").innerHTML=t)<=0&&8!=e.keyCode&&e.preventDefault()},!1)}}catch(e){t=!0,n=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw n}}}function slidePhoto(){new Glitch(_(".glitch_effect")).start()}function upvoteDynamic(){_(".dynamic","click",function(e){if(/awesome_dynamic/.test(e.target.className)){var t=e.target,n=t.getAttribute("_id");if(t.isUpvote)return;var o=Number(t.parentNode.children[1].innerText)+1;fetch("/upvoteDynamic",{method:"POST",headers:{"content-type":"application/json",authorization:Cookies.get("token"),accept:"application/json"},body:JSON.stringify({_id:n,upvote:o})}).then(function(e){return e.json()}).then(function(e){e&&e.success?(t.parentNode.children[1].innerText=o,t.isUpvote=!0,t.style.fontSize="20px",setTimeout(function(){return setStyle(t,{fontSize:"16px",cursor:"not-allowed",color:"#f39e66"})},500)):infoContainer("网络繁忙",t.isUpvote=!1)})}})}function bugReporter(){_(".bug-reporter","click",function(e){e.stopPropagation(),window.open("http://wpa.qq.com/msgrd?v=3&uin=3532371088&site=qq&menu=yes")})}function randomBg(){var e=Math.floor(6*Math.random())+1;setStyle(_("body"),{background:window.innerWidth<750?"#333333d9":'url("./resouce/bg/'+e+'.jpg") no-repeat',backgroundSize:"100% 100%"})}function changeTheme(){_(".change_theme","click",function(){toggleClass(this,"themeapi"),toggleClass(_(".theme_containter"),"theme_show")});for(var t=_(".theme_containter ul li"),e=function(e){t[e].addEventListener("click",function(){setStyle(_("body"),{background:'url("./resouce/bg/'+(e+1)+'.jpg") no-repeat',backgroundSize:"100% 100%"})})},n=0;n<t.length;n++)e(n)}function hideAllClickWindow(){var n=document.getElementsByTagName("video");_("body","click",function(e){for(var t in n)n[t].paused=!1;e=e||window.event;_(".dynamic-msg-container",!1,function(){removeClass(this,"showMsg")}),_(".full_summary").innerText="",_(".article_list .article",!1,function(){removeClass(this,"showArticle"),removeClass(this.children[1],"showClose"),removeClass(this.children[3],"toggleP")}),removeClass(document.querySelectorAll(".right_article_list")[0],"rightArticleHide"),removeClass(_(".search_result_container"),"show_search_container bounceInDown")})}function search(){_(".search_input","click",function(e){_(".get_search li",!1,function(){this.parentNode.removeChild(this)});e=e||window.event;addClass(_(".search_result_container"),"show_search_container bounceInDown"),e.stopPropagation(),_(".context-menu").style.display="none"}),_(".search_input","keyup",function(e){var t,n=e||window.event,o=_(".search_input").value;if((_(".full_summary").innerText="")!==o&&13===n.keyCode)return loadingUI("start"),t=o,_(".get_search li",!1,function(){this.parentNode.removeChild(this)}),void fetch("/search",{method:"POST",headers:{"content-type":"application/json",authorization:Cookies.get("token"),accept:"application/json"},body:JSON.stringify({data:t})}).then(function(e){return loadingUI("end"),200<=e.status&&e.status<300?e.json():e.status}).then(function(e){e&&e.success&&0!==e.result.length?_(".get_search").innerHTML=template("search_result_tpl",{searchs:e.result}):infoContainer(e&&e.errorMsg||'找不到关于"'+t+'"的信息',!1)})})}function fullSearch(){_(".search_result_container","click",function(e){e.stopPropagation()}),_(".search_result_container","mouseover",function(e){if("A"===e.target.tagName.toUpperCase()){_(".article-type-text",!1,function(){removeClass(this,"selectType")});e.target.offsetTop;var t=e.target.getAttribute("_id"),n=e.target.getAttribute("type");_(".full_summary").style.display="block",_(".full_summary").setAttribute("_id",t),_(".full_summary").setAttribute("type",n),_(".full_summary").innerHTML=e.target.innerText,removeClass(_(".full_summary"),"动态"===n?"artilce_type_summary":"dynamic_type_summary"),addClass(_(".full_summary"),"动态"===n?"dynamic_type_summary":"artilce_type_summary")}})}function turnToSummary(){document.querySelector(".full_summary").onclick=function(e){(e=e||window.event).stopPropagation();var t=this.getAttribute("_id");"动态"!==this.getAttribute("type")&&triggerArticle(t)}}function triggerArticle(e){_(".triggerArticle").click();var t=document.getElementsByClassName("articles_list");_(".articles_list",!1,function(){this.style.display="none"});var n=!0,o=!1,r=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;if(s.getAttribute("_id")===e)return s.style.display="block",void s.click()}}catch(e){o=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}}function introduce(e,t){var n=t.split(""),o=n.length,r=_(".introduce"),i="";if(r.setAttribute("autofocus","true"),""===r.value){lifeStep();var a=setInterval(function(){i+=n[e],r.value=i,o<=++e&&(clearInterval(a),r.setAttribute("autofocus","false"),r.disabled=!0)},100)}}function lifeStep(){for(var e=_(".life .step"),t=_(".life .circle"),n=_(".life .line"),o=0;o<e.length;o++)e[o].style.transitionDelay=o+"s",t[o].style.transitionDelay=o+"s",n[o].style.transitionDelay=o+"s",e[o].style.opacity="1",n[o].style.opacity="1",t[o].style.opacity="1",n[o].style.transform="translate3D(0, 0,0)",e[o].style.transform="translate3D(0, 550%,0)"}function wechat(){_("i.wechat","click",function(){toggleClass(_(".wechat_img"),"wechat_show"),toggleClass(this,"themeapi")})}function sina(){_(".sina_api","click",function(){toggleClass(_(".sina"),"sina_show"),toggleClass(this,"themeapi")})}function dynamicMsg(){_(".dynamic","click",function(l){if(_(".context-menu").style.display="none",l.stopPropagation(),/dynamic-msg-icon/.test(l.target.className)&&(l.stopPropagation(),toggleClass(l.target.parentNode.parentNode.children[6],"showMsg")),/leave-dynamic-mg/.test(l.target.className)){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1,o=e.getDate(),r=e.getHours(),i=e.getMinutes(),c=l.target.parentNode.parentNode.parentNode.children[4].children[1],u=t+"-"+(n<10?"0"+n:n)+"-"+(o<10?"0"+o:o)+"--"+(r<10?"0"+r:r)+":"+(i<10?"0"+i:i),d=l.target.parentNode.children[0].value,a=l.target.getAttribute("_id"),s={context:d,date:u},f=sessionStorage&&sessionStorage.getItem("user");""!==d&&""!==d.trim()?100<d.length?infoContainer("字数不能超过100个字符",!1):f?(loadingUI("start"),fetch("/leave-dynamic-mg",{method:"POST",headers:{"content-type":"application/json",authorization:Cookies.get("token"),accept:"application/json"},body:JSON.stringify({_id:a,msg:s,name:f})}).then(function(e){return e.json()}).then(function(e){if(loadingUI("end"),e&&e.success){c.innerText=Number(c.innerText)+1;var t=!0,n=!1,o=void 0;try{for(var r,i=_(".dynamicPageSizeItem")[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var a=r.value;if("true"===a.getAttribute("current")){sessionStorage&&sessionStorage.removeItem("dynamic"+a.innerText);break}}}catch(e){n=!0,o=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw o}}l.target.previousElementSibling.value="";var s='<li class="dynamic-msg-item">\n                                        <i _msgid={{dynamic._id}} _id={{ temp._id }} class="deleteDynamicRepeat linkfont">&#xe603;</i>\n                                        <p class="dynamic-msg-date">\n                                            <span class="dynamic-repeat-name">'+window.Base64.decode(f)+'：</span>\n                                            <span class="date">'+u+'</span>\n                                        </p>\n                                        <p class="dynamic-msg-context">'+d+"</p>\n                                    </li>"+l.target.parentNode.parentNode.children[1].innerHTML;l.target.parentNode.parentNode.children[1].innerHTML=s}else infoContainer(e&&e.errorMsg||"网络繁忙",!1)})):infoContainer("登录才能评论哦",!1):infoContainer("评论不能为空",!1)}})}function getCustomer(){return new Promise(function(t,n){fetch("/get-customer",{headers:{"content-type":"application/json",authorization:Cookies.get("token"),accept:"application/json"}}).then(function(e){return 200<=e.status&&e.status<300?e.json():e}).then(function(e){e&&e.success?(document.getElementById("customer_number").innerText=""+e.data.number,t(e.data.number+1)):n(e&&e.errorMsg||"无法获取访问量"+e.status||"网络繁忙，无法获取访问量")})})}function customer(){getCustomer().then(function(e){var t=new Date;t.setDate(t.getDate()+2),/user/.test(document.cookie)||(fetch("/add-customer",{method:"POST",headers:{"content-type":"application/json",authorization:Cookies.get("token"),accept:"application.json"},body:JSON.stringify({number:e})}),document.cookie="customer=customer; path=/; expires="+t)}).catch(function(e){return infoContainer(e,!1)})}function checkDevice(){window.innerWidth<750&&(alert("您正在使用移动端，移动端仅供预览，完整交互在pc端"),checkLoadingFinished(290))}function selectArticleType(){for(var e=_(".article-type-text"),t=0;t<e.length;t++)e[t].addEventListener("click",function(){_(".article-type-text",!1,function(){removeClass(this,"selectType flip")}),addClass(this,"selectType flip"),reducerArticle(this.innerText,_(".articles"))},!1)}function reducerArticle(e,t){if("全部"!==e){var n=!0,o=!1,r=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;s.getAttribute("type")===e?(addClass(s,"bounceInUp"),s.style.display="block"):s.style.display="none"}}catch(e){o=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}}else{var l=!0,c=!1,u=void 0;try{for(var d,f=t[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){d.value.style.display="block"}}catch(e){c=!0,u=e}finally{try{!l&&f.return&&f.return()}finally{if(c)throw u}}}}function contextMenu(){var o=_(".context-menu");randomBgColor(),window.oncontextmenu=function(e){e.preventDefault();var t=e.clientX,n=e.clientY;setStyle(o,{left:t+"px",top:n+"px"}),o.style.display="none",removeClass(o,"jello"),setTimeout(function(){o.style.display="block",addClass(o,"jello")},20)},_(".context-menu ul li","click",function(e){e.stopPropagation()}),window.onclick=function(){"block"===o.style.display&&(o.style.display="none")}}function randomBgColor(){var o=["#abd0bc","#62cf8e","#f46c3c","#b2b2b2","#ddc49c","#62b78d","#d1f9f1","#c4c4c4","#b89168","#ff766e","#1e89bd","#d34694","#c5d08d","#4ae488"],r=o.length;_(".random-bg","click",function(){var e=Math.floor(Math.random()*r),t=Math.floor(Math.random()*r),n=Math.floor(Math.random()*r);setStyle(_("body"),{background:"linear-gradient(to bottom, "+o[e]+", "+o[t]+", "+o[n]+")"})}),_(".menu-reload","click",function(){window.location.reload()});var t=_(".loadingY")[0].offsetHeight+"px";_(".close-blog","click",function(){_(".tempexit",!(_(".loading").style.display="block"),function(e){this.style.display="none"}),_(".loadingY",!1,function(){var e=this;this.style.display="block",this.style.height="0px",setTimeout(function(){e.style.height=t},10),setTimeout(function(){window.location.href="https://www.baidu.com/"},2e3)})})}function editEffect(){var e=_(".edit_textarea1");e.addEventListener("focus",function(){return _(".effect_text").style.width="40px"}),e.addEventListener("blur",function(){return _(".effect_text").style.width="0"})}function toggleRepeatList(){_(".message_box","click",function(e){/togger_repeat_list/.test(e.target.className)&&(toggleClass(e.target.parentNode.children[5],"repeat_list_toggle"),e.target.innerText=/展开/.test(e.target.innerText)?"收起":"展开")})}function allUserAvatar(){var g=_(".user_name_msg"),e=[];if(g){var t=!0,n=!1,o=void 0;try{for(var r,i=g[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var a=r.value;e.push(a.innerText)}}catch(e){n=!0,o=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw o}}var s=[].concat(_toConsumableArray(new Set(e)));fetch("/all_user_avatar",{method:"POST",headers:{"content-type":"application/json",authorization:Cookies.get("token"),accept:"application/json"},body:JSON.stringify({name:s})}).then(function(e){return 200<=e.status&&e.status<300?e.json():e}).then(function(e){if(e&&e.success){var t=!0,n=!1,o=void 0;try{for(var r,i=g[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var a=r.value,s=!0,l=!1,c=void 0;try{for(var u,d=e.data[Symbol.iterator]();!(s=(u=d.next()).done);s=!0){var f=u.value;a.innerText===f.name&&(a.parentNode.parentNode.children[0].children[0].src=f.avatar)}}catch(e){l=!0,c=e}finally{try{!s&&d.return&&d.return()}finally{if(l)throw c}}}}catch(e){n=!0,o=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw o}}}else infoContainer(e&&e.errorMsg||"网络出错"+e.status,!1)})}}function openSouceContainer(){"block"!==_(".sourceContainer").style.display&&(_(".initDisplay",!1,function(e){this.style.display="none"}),_(".sourceContainer").style.display="block",randomAbountMe())}function entryMoreOperation(){var e=new Mobile({target:document.getElementsByClassName("left_container")[0],menu:[{name:"关于主页",callback:entryAboutMe},{name:"资源管理",callback:openSouceContainer},{name:"主界面",callback:function(){_(".left_container").style.transform="scale(1)",_(".mobileFace .about_me_container")&&_(".mobileFace").removeChild(_(".about_me_container"))}}],searchCallback:function(e){return function(e){_("#_script")&&_("body").removeChild(_("#_script"));var t=document.createElement("script");t.id="_script",t.src="https://sp0.baidu.com/5a1Fazu8AA54nxGko9WTAnF6hhy/su?wd="+e+"&json=1&p=3&sid=1442_21114_20880_27377_27245_20719&req=2&csor=1&cb=callback",_("body").appendChild(t)}(e)},bg:"./resouce/images/menu.jpg",param:'<div class="mobileFace">\n\n        </div>'});var t=_(".more_operation_container");_(".more_operation_entry","click",function(){toggleClass(t,"moreContainerToggle"),"更多"===this.innerText?(e.start(),this.innerText="X",_(".body_overlay").style.opacity=1):(e.endInterval(),this.innerText="更多",_(".body_overlay").style.opacity=0)})}function callback(e){if(e.s){var t=document.createElement("ul");t.addEventListener("click",function(e){"LI"===e.target.tagName.toUpperCase()&&window.open("https://www.baidu.com/s?wd="+e.target.innerText)},!1),t.className="_searchUl";for(var n=0;n<e.s.length;n++){var o=document.createElement("li");o.innerText=e.s[n],o.className="serchItem",n<=5&&t.appendChild(o)}_(".mobileFace ._searchUl")&&_(".mobileFace").removeChild(_("._searchUl")),_(".mobileFace").appendChild(t)}}function randomAbountMe(){var e=_(".about_me_container .box"),t=!0,n=!1,o=void 0;try{for(var r,i=e[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var a=r.value,s=300*(Math.random()+1),l=3*Math.random(),c=parseInt(s)%2==0?-1:1,u=300*(Math.random()+1);setStyle(a,{transition:"all "+l+"s",opacity:"0",display:"none",transform:"translateX("+c*s+"px) translateZ("+c*(u+s)+"px) translateY("+c*u+"px)"})}}catch(e){n=!0,o=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw o}}}function entryAboutMe(){_(".mobileFace ._searchUl")&&_(".mobileFace").removeChild(_("._searchUl")),_(".left_container").style.transform="scale(1.5)",_(".mobileFace").innerHTML='                    <div class="about_me_container initDisplay">\n    <div class="box fl"></div>\n    <div class="box fl"></div>\n    <div class="box fl"></div>\n    <div class="box fl"></div>\n    <div class="box fl"></div>\n    <div class="box fl"></div>\n    <div class="box fl">\n        <p class="name">Ada</p>\n    </div>\n    <div class="box fl">\n        <p class="name_info">代码爱好者...</p>\n    </div>\n    <div class="box fl"></div>\n    <div class="box fl"></div>\n    <div class="box fl">\n        <p class="info1">\n        </p>\n    </div>\n    <div class="box fl">\n        <p class="info2">\n        </p>\n    </div>\n    <div class="box fl">\n        <p class="info4">业余的</p>\n    </div>\n    <div class="box fl">\n        <p class="info5">纯属爱好</p>\n    </div>\n    <div class="box fl"></div>\n    <div class="box fl">\n        \n    </div>\n    <div class="box fl"></div>\n    <div class="box fl">\n    <p class="info3">\n    生命不息\n    </p>\n    </div>\n    <div class="box fl">\n        <p class="info6">\n        code\n        </p>\n    </div>\n    <div class="box fl">\n        <p class="info7">不止</p>\n    </div>\n    <div class="avatar_container"></div>\n</div>',randomAbountMe(),_(".initDisplay",!1,function(){this.style.display="none"});var e=_(".about_me_container .box"),t=function(e){e.style.display="block",setTimeout(function(){setStyle(e,{transform:"translate(0) scale(1.009)",opacity:"1"})},10)},n=!0,o=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){t(i.value)}}catch(e){o=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}_(".about_me_container").style.display="block"}function mobileEntry(){_(".entry_mibile","click",function(e){return toggleClass(_(".mobile_entry"),"showSlideBar")})}function loginApi(){_(".login-i","click",function(){"none"===_("#login").style.display?_("#register").click():_("#login").click()})}function share(){_(".shareToSina","click",function(e){!function(e,t,n){var o="http://v.t.sina.com.cn/share/share.php?",r=t.location.href,i=["url=",n(r),"&title=",n("个人主页"),"&appkey=2924220432","&pic=",n("http://wx4.sinaimg.cn/mw690/a99a6e98ly1fox8tzjwvaj211l0hmq39.jpg || http://wx4.sinaimg.cn/mw690/a99a6e98ly1fox8u9irlkj211x0hndnw.jpg || http://wx4.sinaimg.cn/mw690/a99a6e98ly1fox8u5cwpsj211y0hltn0.jpg || http://wx4.sinaimg.cn/mw690/a99a6e98ly1fox8udqz9yj211x0hntde.jpg")].join("");function a(){window.open([o,i].join(""),"mb",["toolbar=0,status=0,resizable=1,width=620,height=450,left=",(e.width-620)/2,",top=",(e.height-450)/2].join(""))||(r.href=[o,i].join(""))}/Firefox/.test(navigator.userAgent)?setTimeout(a,0):a()}(screen,document,encodeURIComponent)}),_("#zone","click",function(){var e={url:"http://adaxh.applinzi.com",showcount:"1",summary:"个人主页，快来看看吧！",title:"个人主页",pics:"https://camo.githubusercontent.com/55b9bef92d318357c3688e135d9723519f7085f1/687474703a2f2f7778322e73696e61696d672e636e2f6d773639302f61393961366539386c7931666f783962396c3434696a32307367306c633435372e6a7067",style:"203",width:98,height:22},t=[];for(var n in e)t.push(n+"="+encodeURIComponent(e[n]||""));window.open("http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?"+t.join("&"))})}function innerRepeat(){_(".message_box","click",function(e){if(/innerRepeatAPI/.test(e.target.className)){var n=e.target.getAttribute("_parent_id"),o=e.target.getAttribute("_to_repeat"),r=window.sessionStorage&&sessionStorage.getItem("user")||void 0;r?window.Base64.decode(r)!==o?sendRepeat(function(e,t){fetch("/repeatMsg",{method:"post",headers:{"content-type":"application/json",authorization:Cookies.get("token"),accept:"application/json"},body:JSON.stringify({_id:n,msg:{name:window.Base64.decode(r),toRepeat:o,info:t,date:e}})}).then(function(e){return 200<=e.status&&e.status<300?e.json():e.status}).then(function(e){loadingUI("end"),e&&e.success?(reRenderMsg(e.data),_(".repeat_word").value="",_(".cancel_repeat").click()):infoContainer(e&&e.errorMsg||"网络繁忙"+e)})}):infoContainer("自己回复自己不太好吧",!1):infoContainer("你还没有登录哦",!1)}}),_(".message_box","click",function(t){if(/innerDeleteMsg/.test(t.target.className)){var e=t.target.getAttribute("_parent_id"),n=t.target.getAttribute("_id"),o=sessionStorage.getItem("user")||void 0;sessionStorage.getItem("user")?(loadingUI("start"),fetch("/deleteInnerRepeat",{method:"post",headers:{"content-type":"application/json",authorization:Cookies.get("token"),accept:"application/json"},body:JSON.stringify({_id:n,_parent_id:e,name:window.Base64.decode(o)})}).then(function(e){return 200<=e.status&&e.status<300?e.json():e.status}).then(function(e){loadingUI("end"),e&&e.success?(infoContainer("删除成功",!0),t.target.parentNode.parentNode.parentNode.removeChild(t.target.parentNode.parentNode)):infoContainer(e&&e.errorMsg||"网络繁忙"+e)})):infoContainer("你还没有登录",!1)}})}function navSelect(){for(var e=document.querySelectorAll(".nav a"),n=document.getElementById("navSelect"),t=function(t){e[t].addEventListener("click",function(){var e=document.getElementById("navSelect").offsetWidth;n.style.transform="translateX("+t*e+"px)"})},o=0;o<e.length;o++)t(o)}function viewImg(){_("#dynamic_container","click",function(e){/dynamicImg/.test(e.target.className)&&(_(".dynamicImgView").style.display="block",_(".dynamicImgView img").src=e.target.getAttribute("src"))}),_(".dynamicImgView img","click",function(){return _(".dynamicImgView").style.display="none"})}function handleEnterKey(){_(".enterDown","keydown",function(e){13===e.keyCode&&_(".login-i").click()},!1)}function closeTip(){_(".closeTip","click",function(){_(".avatarTip").style.display="none"})}function updateArticle(){_(".o_all_article","click",function(e){if(/update_article_icon/.test(e.target.className)){var r=e.target.getAttribute("_id");loadingUI("start"),fetch("/queryArticleById",{method:"POST",headers:{"content-type":"application/json",authorization:Cookies.get("token"),accept:"application/json"},body:JSON.stringify({_id:r})}).then(function(e){return 200<=e.status&&e.status<300?e.json():e}).then(function(e){if(loadingUI("end"),e&&e.success){var t=e.data,n=t.summary,o=t.type;editArticle(n,r,o)}else infoContainer(e&&e.errorMsg||"网络出错 "+e.status)})}})}function editArticle(t,n,e){_(".admin_menu li:nth-of-type(3) a").click(),_(".editor-container").innerHTML=t,_(".publish-edit").setAttribute("type","type");var o=_("#artilce-type-label span"),r=!0,i=!1,a=void 0;try{for(var s,l=o[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=s.value;if(c.innerText===e){c.parentNode.children[0].checked=!0;break}}}catch(e){i=!0,a=e}finally{try{!r&&l.return&&l.return()}finally{if(i)throw a}}_(".update_article","click",function(){var e=_(".editor-container").innerHTML;e!==t?updateArticleById(n,e):infoContainer("内容未更改",!1)})}function updateArticleById(e,t){var n=setArticleType();loadingUI("start"),fetch("/updateArticleById",{method:"POST",headers:{"content-type":"application/json",authorization:Cookies.get("token"),accept:"application/json"},body:JSON.stringify({_id:e,summary:t,type:n})}).then(function(e){return e.json()}).then(function(e){loadingUI("end"),e&&e.success?infoContainer("更新成功",!0,function(){return window.location.reload()}):infoContainer(e&&e.errorMsg||"网络繁忙")})}function getDynamic(e){return new Promise(function(t,n){fetch("/dynamicQueryById",{method:"POST",headers:{"content-type":"application/json",authorization:Cookies.get("token"),accept:"application/json"},body:JSON.stringify({_id:e})}).then(function(e){return 200<=e.status&&e.status<300?e.json():e.status}).then(function(e){t(e)}).catch(function(e){return n([])})})}function dynamicResult(e){getDynamic(e).then(function(e){setText(e)})}function setText(n){_("#dw_title").value=n.title,_(".edit_textarea1").value=n.content,_("span.count").innerHTML=""+(180-n.content.length),_(".uploadView").src=n.img,_("#update_dw").onclick=function(){var e=_(".edit_textarea1").value,t=_("#dw_title").value;e!==n.content||t!==n.title?updateDynamicById(n._id,e,t):infoContainer("内容为更改!!!",!1)}}function updateDynamicById(t,n,o){var e=_(".uploadView").src,r=_(".uploadView").getAttribute("name");if(300<e.length)return loadingUI("start"),void fetch("/setDynamicImg",{method:"POST",headers:{"content-type":"application/json",authorization:Cookies.get("token"),accept:"application/json"},body:JSON.stringify({name:r,dataUrl:e})}).then(function(e){return loadingUI("end"),200<=e.status&&e.status<300?e.json():e}).then(function(e){e.success?i(t,n,o,e.img):infoContainer(e&&e.errorMsg||e)});function i(e,t,n,o){fetch("/updateDynamic",{method:"POST",headers:{"content-type":"application/json",authorization:Cookies.get("token"),accept:"application/json"},body:JSON.stringify({_id:e,content:t,title:n,img:o})}).then(function(e){return 200<=e.status&&e.status<300?e.json():e.status}).then(function(e){e?infoContainer("更新成功",!0,function(){window.sessionStorage&&sessionStorage.removeItem("dynamic"+getCurrentPageSize("dynamic")),window.location.reload()}):infoContainer("更新失败，请稍后重试",!1)}).catch(function(e){return infoContainer(e,!1)})}i(t,n,o)}function editDynamic(){_(".all_short_article","click",function(e){if(/edit_item_dynamic_icon/.test(e.target.className)){var t=e.target.parentNode.getAttribute("_id");_(".admin_menu li:nth-of-type(1) a").click(),getDynamic(t).then(function(e){setText(e)})}})}function mapToArticleList(){var e=_(".article_list li.article");if(1!==e.length){var t="",n=!0,o=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value,l=s.children[s.children.length-2].innerText,c=s.getAttribute("_id");t+="<li _id="+c+' >\n            <a class="delete_item delete_article" _id='+c+'><i class="fl linkfont">&#xe603;</i></a>\n            <a class="fl edit_item_article" _id='+c+"><i _id="+c+' class="update_article_icon linkfont">&#xe759;</i></a>\n            <p class="fl">'+(s.children[s.children.length-1].children[0].children[0].innerText||"title error")+'</p>\n            <span class="fr short_article_date">'+l+"</span>\n        </li>"}}catch(e){o=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}_(".o_all_article").innerHTML=t}}function randomArticleBg(){for(var e=[{bgc:"#d9edf7",color:"#31708f"},{bgc:"#f2dede",color:"#a94442"},{bgc:"#fff3cc",color:"#ffc100"},{bgc:"#f6edfb",color:"#cd97eb"},{bgc:"#fcf8e3",color:"#8a6d3b"},{bgc:"rgb(225, 249, 220)",color:"#31708f"},{bgc:"rgb(212, 253, 204)",color:"#31708f"},{bgc:"#fcfcfc",color:"#31708f"}],t=_(".article_list .article"),n=0,o=t.length;n<o;n++){var r=Math.floor(Math.random()*e.length);t[n].style.background=e[r].bgc}}function exitGallery(){_(".exit_gallery","click",function(){setStyle(_(".canvas_box"),{zIndex:"-100",transform:"scale(0)"})})}function galleryApi(){_(".gallery_api","click",function(){setStyle(_(".canvas_box"),{zIndex:"1000",transform:"scale(1)"})})}function insertGallery(){_("body").innerHTML+='<div class="canvas_box">\n    <i class="exit_gallery linkfont">&#xe629;</i>\n    <canvas id="canvas">你的浏览器不支持HTML5画布技术，请使用谷歌浏览器。</canvas>\n</div>'}window.onload=function(){viewImg(),loadDynamicByPageSize(),handleEnterKey(),navSelect(),innerRepeat(),share(),loginApi(),hashRouter(),mobileEntry(),randomBg(),entryMoreOperation(),allUserAvatar(),toggleRepeatList(),editEffect(),turnToSummary(),bugReporter(),contextMenu(),selectArticleType(),checkDevice(),customer(),cancleTextEdit(),dynamicMsg(),sina(),wechat(),fullSearch(),hideAllClickWindow(),changeTheme(),search(),loginState(),showArticle(),loading(),selectNav(),register(),exitLoginRegCancel(),messageCount(_(".message_item").length),shortArticleLimited(),leaveMsg(),wordLimited(),galleryApi(),exitGallery(),slidePhoto(),upvoteDynamic(),randomArticleBg(),mapToArticleList(),closeTip()},function(){var i,a,s,l,c,u,d,f,g,m,o,t,r;console.log("start"),(u=[],d=[],f=0,g=[1,2],m=function(e,t){if(this.parent=e,this.ctx=i,this.color=t.fill||!1,this.points=[],!t.img){for(var n=0;n<4;n++)this.points[n]=new ge1doot.transform3D.Point(e.pc.x+t.x[n]*e.normalZ+t.z[n]*e.normalX,e.pc.y+t.y[n],e.pc.z+t.x[n]*e.normalX+-t.z[n]*e.normalZ);this.points[3].next=!1}},o=function(e,t,n){this.img=new ge1doot.transform3D.Image(this,e+t.img,1,{isLoaded:function(e){e.parent.isLoaded=!0,e.parent.loaded(e)}}),this.visible=!1,this.normalX=t.nx,this.normalZ=t.nz,this.pc=new ge1doot.transform3D.Point(t.x,t.y,t.z),this.tx=t.x+t.nx*Math.sqrt(l.focalLength)*20,this.tz=t.z-t.nz*Math.sqrt(l.focalLength)*20,this.poly=[];for(var o,r=-1;o=n[++r];)d[r]=!0===o.img?1:2,this.poly.push(new m(this,o))},t=function(e){m.prototype.drawPoly=ge1doot.transform3D.drawPoly,s=new ge1doot.Screen({container:"canvas"}),i=s.ctx,s.resize(),a=new ge1doot.Pointer({tap:function(){if(l.over)if(l.over===l.target.elem)l.target.x=0,l.target.z=0,l.target.elem=!1;else{l.target.elem=l.over,l.target.x=l.over.tx,l.target.z=l.over.tz;for(var e,t=0;e=u[t++];){var n=l.target.x-e.pc.x,o=l.target.z-e.pc.z,r=1500<Math.sqrt(n*n+o*o)?g[0]:g[1];e.img.setLevel(r)}}}}),(l=new ge1doot.transform3D.Camera({focalLength:10*Math.sqrt(s.width),easeTranslation:.025,easeRotation:.06,disableRz:!0},{move:function(){this.over=!1,a.isDraging?(this.target.elem=!1,this.target.ry=.01*-a.Xi,this.target.rx=(a.Y-.5*s.height)/(.5*s.height)):this.target.elem&&(this.target.ry=Math.atan2(this.target.elem.pc.x-this.x,this.target.elem.pc.z-this.z)),this.target.rx*=.9}})).z=-1e4;for(var t,n=l.py=0;t=e.imgdata[n++];)u.push(new o(e.options.imagesPath,t,e.structure));setInterval(function(){g=50<f?[2,3]:[1,2],f=0},1e3),r()},r=function e(){i.clearRect(0,0,s.width,s.height),l.move();for(var t,n=-1;t=d[++n];){c=!1;for(var o,r=0;o=u[r++];)1===t&&o.draw()||o.visible&&o.poly[n].draw()}l.over&&!a.isDraging?s.setCursor("pointer"):s.setCursor("move"),f++,requestAnimFrame(e)},m.prototype.draw=function(){var e=this.color;if(e.light||!c){var t=e.light?this.parent.light:1;c="rgba("+Math.round(e.r*t)+","+Math.round(e.g*t)+","+Math.round(e.b*t)+","+(e.a||1)+")",i.fillStyle=c}if(!e.light||this.parent.light<1){for(var n=0;this.points[n++].projection(););this.drawPoly(),i.fill()}},o.prototype.loaded=function(e){for(var t=[-1,1,1,-1,1,1,-1,-1],n=.5*e.texture.width,o=.5*e.texture.height,r=0;r<4;r++)e.points[r]=new ge1doot.transform3D.Point(this.pc.x+n*this.normalZ*t[r],this.pc.y+o*t[r+4],this.pc.z+n*this.normalX*t[r])},o.prototype.draw=function(){return this.pc.projection(),this.pc.Z>-(l.focalLength>>1)&&this.img.transform3D(!0)?(this.light=.5+.6*Math.abs(this.normalZ*l.cosY-this.normalX*l.sinY),this.visible=!0,this.img.draw(),(a.hasMoved||a.isDown)&&this.img.isPointerInside(a.X,a.Y)&&(l.over=this)):this.visible=!1,!0},{load:function(e){window.addEventListener("load",function(){ge1doot.loadJS("./js/imageTransform3D.js",t,e)},!1)}}).load({imgdata:[{img:"./../resouce/gallery/1.jpg",x:-1e3,y:0,z:1500,nx:0,nz:1},{img:"./../resouce/gallery/2.jpg",x:0,y:0,z:1500,nx:0,nz:1},{img:"./../resouce/gallery/3.jpg",x:1e3,y:0,z:1500,nx:0,nz:1},{img:"./../resouce/gallery/4.jpg",x:1500,y:0,z:1e3,nx:-1,nz:0},{img:"./../resouce/gallery/5.jpg",x:1500,y:0,z:0,nx:-1,nz:0},{img:"./../resouce/gallery/6.jpg",x:1500,y:0,z:-1e3,nx:-1,nz:0},{img:"./../resouce/gallery/7.jpg",x:1e3,y:0,z:-1500,nx:0,nz:-1},{img:"./../resouce/gallery/8.jpg",x:0,y:0,z:-1500,nx:0,nz:-1},{img:"./../resouce/gallery/9.jpg",x:-1e3,y:0,z:-1500,nx:0,nz:-1},{img:"./../resouce/gallery/10.jpg",x:-1500,y:0,z:-1e3,nx:1,nz:0},{img:"./../resouce/gallery/11.jpg",x:-1500,y:0,z:0,nx:1,nz:0},{img:"./../resouce/gallery/12.jpg",x:-1500,y:0,z:1e3,nx:1,nz:0}],structure:[{fill:{r:255,g:255,b:255,light:1},x:[-1001,-490,-490,-1001],z:[-500,-500,-500,-500],y:[500,500,-500,-500]},{fill:{r:255,g:255,b:255,light:1},x:[-501,2,2,-500],z:[-500,-500,-500,-500],y:[500,500,-500,-500]},{fill:{r:255,g:255,b:255,light:1},x:[0,502,502,0],z:[-500,-500,-500,-500],y:[500,500,-500,-500]},{fill:{r:255,g:255,b:255,light:1},x:[490,1002,1002,490],z:[-500,-500,-500,-500],y:[500,500,-500,-500]},{fill:{r:0,g:0,b:0,a:.2},x:[-420,420,420,-420],z:[-500,-500,-500,-500],y:[150,150,-320,-320]},{fill:{r:0,g:0,b:0,a:.2},x:[-20,20,20,-20],z:[-500,-500,-500,-500],y:[250,250,150,150]},{fill:{r:0,g:0,b:0,a:.2},x:[-20,20,20,-20],z:[-500,-500,-500,-500],y:[-320,-320,-500,-500]},{fill:{r:0,g:0,b:0,a:.2},x:[-20,20,10,-10],z:[-500,-500,-100,-100],y:[-500,-500,-500,-500]},{fill:{r:32,g:32,b:32},x:[-50,50,50,-50],z:[-150,-150,-50,-50],y:[-500,-500,-500,-500]},{fill:{r:16,g:16,b:16},x:[-10,10,10,-10],z:[-100,-100,-100,-100],y:[300,300,-500,-500]},{fill:{r:255,g:255,b:255},x:[-320,-320,-320,-320],z:[0,-20,-20,0],y:[-190,-190,190,190]},{fill:{r:255,g:255,b:255},x:[320,320,320,320],z:[0,-20,-20,0],y:[-190,-190,190,190]},{img:!0},{fill:{r:255,g:128,b:0},x:[-50,50,50,-50],z:[450,450,550,550],y:[500,500,500,500]},{fill:{r:255,g:128,b:0},x:[-50,50,50,-50],z:[450,450,550,550],y:[-500,-500,-500,-500]}],options:{imagesPath:""}})}();