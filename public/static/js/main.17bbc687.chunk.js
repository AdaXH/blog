(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{144:function(e,t,a){},167:function(e,t,a){e.exports=a(388)},172:function(e,t,a){},222:function(e,t,a){},224:function(e,t,a){},249:function(e,t,a){},251:function(e,t,a){},268:function(e,t,a){},276:function(e,t,a){},286:function(e,t){},316:function(e,t,a){},318:function(e,t,a){},385:function(e,t,a){},388:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(10),o=a.n(i),s=(a(172),a(16)),l=a(17),c=a(20),u=a(18),m=a(19),p=(a(174),a(148)),d=a.n(p),f=(a(222),a(401)),h=a(70),g=(a(224),a(15)),v=Object(g.b)(function(e){return{}},function(e){return{set:function(t,a){e({type:"LOGO",payload:{src:t,item:a}})}}})(function(e){return r.a.createElement("footer",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("div",null,r.a.createElement(f.a,{to:"/index",onClick:function(){return e.set("home","\u9996\u9875")}},r.a.createElement(h.a,{type:"home"}),"\u9996\u9875"))),r.a.createElement("li",null,r.a.createElement("div",null,r.a.createElement(f.a,{to:"/article",onClick:function(){return e.set("file-text","\u6587\u7ae0")}},r.a.createElement(h.a,{type:"file-text"}),"\u6587\u7ae0"))),r.a.createElement("li",null,r.a.createElement("div",null,r.a.createElement(f.a,{to:"/message",onClick:function(){return e.set("message","\u7559\u8a00")}},r.a.createElement(h.a,{type:"message"}),"\u7559\u8a00\u677f"))),r.a.createElement("li",null,r.a.createElement("div",null,r.a.createElement(f.a,{to:"/about",onClick:function(){return e.set("tag","\u5173\u4e8e")}},r.a.createElement(h.a,{type:"tag"}),"\u5173\u4e8e")))))}),y=(a(242),a(152)),E=a.n(y),b=(a(249),Object(g.b)(function(e){return{logo:e.logo}},function(){return{}})(function(e){return r.a.createElement("header",null,r.a.createElement("div",{className:"logo"},r.a.createElement("span",null," ",r.a.createElement(h.a,{style:{position:"relative",top:"-1px"},type:e.logo.src})," "),"Ada - ",e.logo.item),r.a.createElement(E.a,{className:"headerItem",placeholder:"\u641c\u7d22",maxLength:8}))})),j=(a(251),a(402)),x=a(393),O=a(400),S=(a(131),a(28)),k=a.n(S),N=(a(132),a(73)),w=a.n(N),C=a(52),M=(a(50),a(9)),I=a.n(M),_=(a(93),a(51)),A=a.n(_),L=(a(268),a(42)),R=A.a.prompt;var T=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={data:[],time:10,modal:!1},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"loadingToast",value:function(){I.a.loading("\u52a0\u8f7d\u4e2d...",this.state.time,function(){})}},{key:"componentDidMount",value:function(){var e=this,t=document.createElement("style");t.innerHTML=".am-card-body::before{background:none !important} .am-card::before{border:none !important}",document.head.appendChild(t),this.loadingToast(),fetch("/getDynamic",{method:"GET",headers:{"content-type":"application/json",accept:"application/json"}}).then(function(e){return e.status>=200&&e.status<300?e.json():e.status}).then(function(t){var a;I.a.hide(),e.setState({time:0}),t.success?e.setState({data:t.data}):(a=t.errorMsg||"\u7f51\u7edc\u7e41\u5fd9"+t,I.a.offline(a+"!!!",3))})}},{key:"toggleRepeat",value:function(e){var t=this.state.data,a=!0,n=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var s=i.value;if(s._id===e){s.open?s.open=!1:s.open=!0;break}}}catch(l){n=!0,r=l}finally{try{a||null==o.return||o.return()}finally{if(n)throw r}}this.setState({data:Object(C.a)(t)})}},{key:"sendRepeat",value:function(e,t){var a=this;if(e&&""!==e.trim())if(e.length>100)I.a.info("\u5c11\u8bf4\u4e24\u53e5\uff0c\u592a\u957f\u4e86",3);else{I.a.loading("\u52a0\u8f7d\u4e2d...",this.state.time,function(){});var n=new Date,r=n.getFullYear(),i=n.getMonth()+1,o=n.getDate(),s=r+"-"+i+"-"+(o<10?"0"+o:o)+"--"+n.getHours()+":"+n.getMinutes();fetch("/leave-dynamic-mg",{method:"POST",headers:{"content-type":"application/json",accept:"application/json"},body:JSON.stringify({_id:t,msg:{context:e,date:s},name:L.Base64.encode(this.props.user.name)})}).then(function(e){return I.a.hide(),e.json()}).then(function(e){e.success&&a.setState({data:e.data.reverse()},function(){return I.a.hide()})})}else I.a.info("\u8f93\u5165\u4e0d\u89c4\u8303",1)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"dynamicContainer"},this.state.data&&0!==this.state.data.length&&this.state.data.map(function(t){var a=t.msg&&t.msg.length||0;return r.a.createElement("div",{key:t._id},r.a.createElement(w.a,null),r.a.createElement(k.a,null,r.a.createElement(k.a.Header,{title:r.a.createElement("div",{className:"dynamicTitle"},r.a.createElement("div",null,t.title))}),r.a.createElement(k.a.Body,null,r.a.createElement("div",{style:{color:"#7d7d7d",fontSize:"14px",lineHeight:"30px",whiteSpace:"pre-wrap",textAlign:"left"}},t.content)),r.a.createElement(k.a.Footer,{content:r.a.createElement("div",{className:"dynamicOperationContainer"},r.a.createElement("div",{className:"dynamicDate"},t.date),r.a.createElement("div",{className:"rightTemp"},r.a.createElement("div",{className:"upvote"},r.a.createElement(h.a,{style:{position:"relative",top:"-1px",left:"-5px"},type:"like"}),t.upvote),r.a.createElement("div",{className:"repeat"},r.a.createElement("span",{onClick:function(){return e.toggleRepeat(t._id)}},r.a.createElement(h.a,{style:{position:"relative",top:"-1px",left:"-5px"},type:t.open?"close":"message"}),a))))}),t.open?r.a.createElement("div",{className:"repeatContainer",key:t._id},r.a.createElement("div",{style:{textAlign:"right",color:"#888",marginTop:"12px",paddingRight:"20px"}},r.a.createElement(h.a,{style:{position:"relative",top:"-1px",left:"-5px"},type:"form",onClick:function(){return e.props.user.name?R("","\u5199\u4e0b\u4f60\u7684\u8bc4\u8bba",[{text:"\u7b97\u4e86"},{text:"\u8bc4\u8bba",onPress:function(a){return e.sendRepeat(a,t._id)}}],"default",""):I.a.fail("\u4f60\u8fd8\u6ca1\u6709\u767b\u5f55\u54e6",1)}})),r.a.createElement("div",{className:"repeatList"},r.a.createElement("ul",null,t.msg&&t.msg.reverse().map(function(e){return r.a.createElement("li",{key:e._id},r.a.createElement("div",{className:"name"},e.name||"\u795e\u79d8\u4eba"," : ",r.a.createElement("span",null,e.date)),r.a.createElement("div",{className:"context"},e.context))})))):""))}))}}]),t}(r.a.PureComponent),D=Object(g.b)(function(e){return{user:e.user}},function(e){return{setUser:function(t){e({type:"SET_USER_VO",payload:t})}}})(T),H=(a(270),a(113)),U=a.n(H),P=(a(276),a(75)),B=a.n(P),F=U.a.Item,G=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={data:[]},e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidCatch",value:function(e,t){}},{key:"componentDidMount",value:function(){var e=this,t=!0,a=!1,n=void 0;try{for(var r,i=document.querySelectorAll(".ql-editor")[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){r.value.contenteditable=!1}}catch(o){a=!0,n=o}finally{try{t||null==i.return||i.return()}finally{if(a)throw n}}I.a.loading("\u52a0\u8f7d\u4e2d...",this.state.time,function(){}),fetch("/getArticles",{method:"get",headers:{"content-type":"application/json",accept:"application/json"}}).then(function(e){return e.status>=200&&e.status<300?e.json():e.status}).then(function(t){t.success?e.setState({data:t.data},function(){return I.a.hide()}):I.a.offline(t.errorMsg+"!!!",3)}).catch(function(e){return I.a.offline(e+"!!!",3)})}},{key:"onSelect",value:function(e){var t=e.props.value;"4"===e.key&&this.props.history.push("/article"+t)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"articleContainer"},r.a.createElement("ul",{className:"articleList"},this.state.data&&this.state.data.map(function(t){return r.a.createElement("li",{key:t._id,className:"articleItem"},r.a.createElement("div",{className:"articleStatus"},r.a.createElement("div",null,r.a.createElement(h.a,{style:{position:"relative",right:"2px",top:"-1px"},type:"clock-circle"}),r.a.createElement("span",{style:{fontSize:"12px"}},t.date)),r.a.createElement("div",null,r.a.createElement(h.a,{style:{position:"relative",top:"-1px"},type:"like"}),r.a.createElement("span",{style:{marginLeft:"4px"}},t.viewer)),r.a.createElement("div",null,r.a.createElement(h.a,{style:{position:"relative",top:"-1px"},type:"tag"}),r.a.createElement("span",{style:{marginLeft:"4px"}},t.type)),r.a.createElement("div",{className:"operation"},r.a.createElement(U.a,{mask:!0,overlayClassName:"fortest",overlayStyle:{color:"currentColor"},visible:e.state.visible,overlay:[r.a.createElement(F,{key:"4",value:t._id,"data-seed":"logId"},"\u67e5\u770b\u8be6\u60c5"),r.a.createElement(F,{key:"5",value:t._id,style:{whiteSpace:"nowrap"}},"\u70b9\u4e2a\u8d5e"),r.a.createElement(F,{key:"6",value:t._id},r.a.createElement("span",{style:{marginRight:5}},"\u5206\u4eab"))],align:{overflow:{adjustY:0,adjustX:0},offset:[-10,0]},onVisibleChange:e.handleVisibleChange,onSelect:function(t){return e.onSelect(t)}},r.a.createElement("div",null,"more")))),r.a.createElement("div",{className:"articleTitle"},B()(t.summary.slice(0,200)+" ......")))})))}}]),t}(r.a.PureComponent),J=(a(316),function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={data:{}},e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;I.a.loading("\u52a0\u8f7d\u4e2d...",this.state.time,function(){});var t=this.props.match.params.id;fetch("/queryArticleById",{method:"POST",headers:{"content-type":"application/json",accept:"application/json"},body:JSON.stringify({_id:t})}).then(function(e){return e.status>=200&&e.status<300?e.json():e.status}).then(function(t){t.success?e.setState({data:t.data},function(){return I.a.hide()}):I.a.loading(t.errorMsg||"\u7f51\u7edc\u7e41\u5fd9"+t,3)})}},{key:"render",value:function(){return r.a.createElement("div",{className:"detailContainer"},r.a.createElement("div",{className:"articleStatus1"},r.a.createElement("div",{className:"articleStatus1"},r.a.createElement("div",null,r.a.createElement(h.a,{style:{position:"relative",top:"1px"},type:"clock-circle"}),r.a.createElement("span",{style:{marginLeft:"4px"}},this.state.data.year,"-",this.state.data.date)),r.a.createElement("div",null,r.a.createElement(h.a,{style:{position:"relative",top:"2px"},type:"tag"}),r.a.createElement("span",{style:{marginLeft:"4px"}},this.state.data.type)),r.a.createElement("div",null,r.a.createElement(h.a,{style:{position:"relative",top:"1px"},type:"like"}),r.a.createElement("span",{style:{marginLeft:"4px"}},this.state.data.viewer)))),B()(this.state.data.summary))}}]),t}(r.a.PureComponent)),q=(a(318),A.a.prompt),z=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={data:[],avatar:[],names:[]},e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(){return 0!==arguments[1].data.length}},{key:"componentDidMount",value:function(){var e=this;I.a.loading("\u52a0\u8f7d\u4e2d...",3),fetch("/getAllMessages",{method:"GET",headers:{"content-type":"application/json",accept:"application/json"}}).then(function(e){return e.status>=200&&e.status<300?e.json():e.status}).then(function(t){if(t.success){var a=[],n=!0,r=!1,i=void 0;try{for(var o,s=t.data[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var l=o.value;a.push(l.name)}}catch(c){r=!0,i=c}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}e.setState({data:t.data,names:Object(C.a)(new Set(a))},function(){e.getAvatars(),I.a.hide()})}else I.a.offline("\u7f51\u7edc\u7e41\u5fd9"+t.errorMsg,2)}).catch(function(e){I.a.offline(e,2)})}},{key:"getAvatars",value:function(){var e=this;fetch("/all_user_avatar",{method:"POST",headers:{"content-type":"application/json",accept:"application/json"},body:JSON.stringify({name:this.state.names})}).then(function(e){return e.status>=200&&e.status<300?e.json():e}).then(function(t){t.success&&e.setState({avatar:t.data})})}},{key:"setAvatar",value:function(e){var t=!0,a=!1,n=void 0;try{for(var r,i=this.state.avatar[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;if(e===o.name)return o.avatar}}catch(s){a=!0,n=s}finally{try{t||null==i.return||i.return()}finally{if(a)throw n}}return""}},{key:"toggleList",value:function(e){var t=this.state.data,a=!0,n=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var s=i.value;s._id===e&&(s.open=!s.open)}}catch(l){n=!0,r=l}finally{try{a||null==o.return||o.return()}finally{if(n)throw r}}this.setState({data:Object(C.a)(t)})}},{key:"sendMsg",value:function(e,t,a){var n=this;if(t){if(!e||""===e.trim())return void I.a.fail("\u8f93\u5165\u4e0d\u89c4\u8303",1);var r=new Date,i=r.getMinutes(),o=i<10?i+1:"0"+i,s=r.getSeconds()<10?"0".concat(r.getSeconds()):r.getSeconds(),l=r.getHours()<10?"0".concat(r.getHours()):r.getHours(),c=r.getFullYear()+"/"+(r.getMonth()+1<10?"0".concat(r.getMonth()+1):r.getMonth()+1)+"/"+(r.getDate()<10?"0".concat(r.getDate()):r.getDate())+" "+l+":"+o+":"+s;return I.a.loading("\u52a0\u8f7d\u4e2d",1),void fetch("/repeatMsg",{method:"POST",headers:{"content-type":"application/json",accept:"application/json"},body:JSON.stringify({_id:t,msg:{info:g(e),name:this.props.user.name,date:c,toRepeat:a}})}).then(function(e){return e.status>=200&&e.status<300?e.json():e.status}).then(function(e){e&&e.success?n.setState({data:e.data.reverse()},function(){return I.a.hide()}):I.a.offline(e&&e.errorMsg||"\u7f51\u7edc\u7e41\u5fd9"+e,1)})}if(e&&""!==e.trim()){I.a.loading("\u52a0\u8f7d\u4e2d...",3);var u=g(e),m=this.props.user.name,p=new Date,d=p.getMinutes()?p.getMinutes()+1:"0"+p.getMinutes(),f=p.getHours(),h=p.getFullYear()+"-"+(p.getMonth()+1)+"-"+p.getDate()+"-----"+f+" : "+d;fetch("/leaveMessage",{method:"POST",headers:{"content-type":"application/json",accept:"application/json"},body:JSON.stringify({date:h,content:u,name:m})}).then(function(e){return e.status>=200&&e.status<300?e.json():e.status}).then(function(e){e.success?(n.setState({data:Object(C.a)(e.data).reverse()},function(){return I.a.hide()}),I.a.loading("\u7559\u8a00\u6210\u529f",2)):I.a.fail(e.errorMsg)}).catch(function(e){return I.a.fail(e)})}else I.a.fail("\u8f93\u5165\u7684\u4e0d\u5bf9",2);function g(e){return e.replace(/<input\stype="text"\sdata-formula="e=mc\^2"\sdata-link="quilljs\.com"\sdata-video="Embed\sURL">/g,"").replace(/<input\stype="text"\sdata-formula="e=mc\^2"\sdata-link="quilljs\.com"\sdata-video="Embed\sURL"\splaceholder="Embed\sURL">/g,"").replace(/<\/?script>+|\u50bb\u903c+|\u7238\u7238+|\u4f60\u7238+|SB+|sB+|sb+|\u64cd+|\u4f60\u5988/g,"**")}}},{key:"toggleRepeat",value:function(e){console.log(e)}},{key:"renderMsg",value:function(e,t){var a=this;return"repeat"===t?0===e.length?r.a.createElement("div",{style:{lineHeight:"20px"},className:"repeatItemContainer"},"\u8fd8\u6ca1\u6709\u4eba\u56de\u590d\u54e6"):r.a.createElement("div",{className:"repeatItemContainer"},r.a.createElement("div",{className:"dot"}),e&&e.map(function(e){return r.a.createElement("div",{className:"repeatItem",key:e._id},r.a.createElement("div",{className:"repeatStatus"},e.name," ",e.date," \u56de\u590d ",e.toRepeat),r.a.createElement("div",{className:"repeatText"},e.info))})):e&&e.map(function(e){return r.a.createElement("div",{className:"messageItem",key:e._id},r.a.createElement(w.a,null),r.a.createElement(k.a,null,r.a.createElement(k.a.Header,{title:r.a.createElement("span",null,r.a.createElement("div",{style:{paddingLeft:"7px"}},e.name),r.a.createElement("div",{className:"messageDate"},e.date.replace(/-----/," "))),thumb:a.setAvatar(e.name)}),r.a.createElement(k.a.Body,null,r.a.createElement("div",{style:{color:"#7d7d7d",marginLeft:"53px",fontSize:"14px",lineHeight:"30px",whiteSpace:"pre-wrap",textAlign:"left"}},e.content)),r.a.createElement(k.a.Footer,{extra:r.a.createElement("div",{className:"messageOperationContainer",style:{textAlign:"center"}},r.a.createElement("div",{style:{fontSize:"12px"},onClick:function(){return a.toggleList(e._id)}},r.a.createElement("span",{style:{position:"relative",top:"1px"}},e.repeat.length||0),r.a.createElement(h.a,{style:{position:"relative",top:"0px",left:"4px"},type:"message"})),r.a.createElement("div",{style:{fontSize:"12px"},onClick:function(){return a.props.user.name?q("","\u4f60\u60f3\u5bf9\u8fd9\u6761\u7559\u8a00\u56de\u590d\u4ec0\u4e48\uff1f",[{text:"\u7b97\u4e86"},{text:"\u53d1\u8868",onPress:function(t){return a.sendMsg(t,e._id,e.name)}}],"default",""):I.a.fail("\u4f60\u8fd8\u6ca1\u6709\u767b\u5f55\u54e6",1)}},r.a.createElement(h.a,{style:{position:"relative",left:"-5px"},type:"plus"})))})),e.open&&e.repeat&&a.renderMsg(e.repeat,"repeat"))})}},{key:"render",value:function(){var e=this;if(0!==document.querySelectorAll(".am-card-body").length){var t=document.createElement("style");t.innerHTML=".am-card-body::before{background:none !important} .am-card::before{border:none !important}",document.head.appendChild(t)}return r.a.createElement("div",{className:"messageContainer"},r.a.createElement("div",{ref:"_sendMsg",className:"sendMsg",onClick:function(){return e.props.user.name?(q("","\u5199\u4e0b\u4f60\u7684\u7559\u8a00",[{text:"\u7b97\u4e86"},{text:"\u53d1\u8868",onPress:function(t){return e.sendMsg(t)}}],"default",""),function(e){e.style.transform="rotate(45deg)";var t=document.querySelectorAll(".am-modal-button"),a=!0,n=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var s=i.value;s.addEventListener("click",function(){e.style.transform="rotate(0deg)"})}}catch(l){n=!0,r=l}finally{try{a||null==o.return||o.return()}finally{if(n)throw r}}}(e.refs._sendMsg.children[0])):I.a.fail("\u4f60\u8fd8\u6ca1\u6709\u767b\u9646",1)}},r.a.createElement(h.a,{className:"sendMsgI",type:"plus"})),this.renderMsg(this.state.data))}}]),t}(r.a.Component);var V=Object(g.b)(function(e){return{user:e.user}},function(){return{}})(z),W=function(){return r.a.createElement("div",{className:"view"},r.a.createElement(j.a,null,r.a.createElement(x.a,{path:"/index",component:D}),r.a.createElement(x.a,{path:"/article",component:G}),"ArticleDetail",r.a.createElement(x.a,{path:"/article:id",component:J}),r.a.createElement(x.a,{path:"/message",component:V}),r.a.createElement(O.a,{to:"/index"})))},Y=a(24),X=(a(144),A.a.prompt,function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={aside:!1,status:"\u767b\u9646",user:{},avatar:""},e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"toggleAside",value:function(){this.setState({aside:!this.state.aside})}},{key:"loginOrRegister",value:function(e){"\u6ce8\u9500"!==this.props.user.text||"register"===e?(this.props.toggleUI(e,"open"),this.toggleAside()):this.props.logoOut()}},{key:"componentWillMount",value:function(){if(/user/.test(document.cookie)){var e=document.cookie.split("&"),t=[],a=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){if("user"===(t=i.value.split("="))[0]){sessionStorage&&sessionStorage.setItem("user",t[1]);break}}}catch(s){n=!0,r=s}finally{try{a||null==o.return||o.return()}finally{if(n)throw r}}}}},{key:"componentDidMount",value:function(){var e=document.getElementsByClassName("loginRegContainer")[0];e.style.height=window.innerHeight+"px",window.addEventListener("resize",function(){e.style.height=window.innerHeight+"px"}),this.props.user.status||this.getUserInfo(this.props.user.name)}},{key:"getUserInfo",value:function(e){var t=this;fetch("/getUserInfor",{method:"POST",headers:{"content-type":"application/json",accept:"applciation/json"},body:JSON.stringify({name:e||L.Base64.decode(sessionStorage.getItem("user"))})}).then(function(e){return e.status>=200&&e.status<300?e.json():e.status}).then(function(e){e.success?t.props.userInfo(Object(Y.a)({},e.user,{status:!0,text:"\u6ce8\u9500"})):I.a.offline(e.errorMsg||e,1)}).catch(function(e){return I.a.offline(e,1)})}},{key:"handleUpload",value:function(e){var t=e.nativeEvent.target.files[0];(function(e){var t=this,a=e.name;if(!/png+|jpeg+|gif+|GIF+|PNG+|JPEG/.test(e.type))return void I.a.fail("\u4e0d\u652f\u6301\u7684\u56fe\u7247\u7c7b\u578b",1);var n=new FileReader;n.readAsBinaryString(e),n.onload=function(e){fetch("/set-avatar",{method:"POST",body:JSON.stringify({avatar:e.target.result,name:t.props.user.name,fileName:a}),headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(e){return e.status<=200&&e.status<300?e.json():e}).then(function(e){e&&e.success?(t.props.userInfo(Object(Y.a)({},t.props.user,{avatar:"/upload/user_avatar/".concat(a)})),I.a.success("\u66f4\u65b0\u5934\u50cf\u6210\u529f",1)):I.a.fail(e&&e.errorMsg||"\u7f51\u7edc\u51fa\u9519 "+e.status)})}}).call(this,t)}},{key:"shareToSina",value:function(){!function(e,t,a){var n="http://v.t.sina.com.cn/share/share.php?",r=t.location.href,i=["url=",a(r),"&title=",a("\u4e2a\u4eba\u4e3b\u9875"),"&appkey=2924220432","&pic=",a("http://wx4.sinaimg.cn/mw690/a99a6e98ly1fox8u5cwpsj211y0hltn0.jpg")].join("");function o(){window.open([n,i].join(""),"mb",["toolbar=0,status=0,resizable=1,width=620,height=450,left=",(e.width-620)/2,",top=",(e.height-450)/2].join(""))||(r.href=[n,i].join(""))}/Firefox/.test(navigator.userAgent)?setTimeout(o,0):o()}(window.innerWidth,document,encodeURIComponent)}},{key:"render",value:function(){var e=this;return console.log(this.props),r.a.createElement("div",{className:this.state.aside?"loginContainer asideToggle":"loginContainer"},r.a.createElement("div",{className:"entrySwitch",onClick:function(){return e.toggleAside()}},r.a.createElement(h.a,{type:"right",className:this.state.aside?"toggle":""})),r.a.createElement("div",{className:"leftContainer"},r.a.createElement("div",{className:"avatarContainer"},this.props.user.name&&r.a.createElement("div",{className:"upload"},r.a.createElement("input",{type:"file",onChange:function(t){return e.handleUpload(t)}})),r.a.createElement("img",{src:this.props.user.avatar?this.props.user.avatar:"/upload/user_avatar/IMG_0039.GIF",alt:""}),r.a.createElement("span",{className:"userName"},this.props.user.name||"Ada")),r.a.createElement("div",{className:"operationListContainer"},r.a.createElement("ul",{className:"operationList"},r.a.createElement("li",{onClick:function(){return e.loginOrRegister("login")},className:"operationItem"},r.a.createElement("span",null,r.a.createElement(h.a,{type:"user"})),this.props.user.text),r.a.createElement("li",{onClick:function(){return e.loginOrRegister("register")},className:"operationItem"},r.a.createElement("span",null,r.a.createElement(h.a,{type:"user-add"})),"\u6ce8\u518c"),r.a.createElement("li",{className:"operationItem"},r.a.createElement("a",{style:{color:"#504e4e"},href:"https://github.com/adaxh"},r.a.createElement("span",null,r.a.createElement(h.a,{type:"github"})),"github")),r.a.createElement("li",{className:"operationItem",onClick:function(){return e.shareToSina()}},r.a.createElement("span",null,r.a.createElement(h.a,{type:"weibo-circle"})),"\u5206\u4eab\u5230\u5fae\u535a")))))}}]),t}(r.a.PureComponent));var $=Object(g.b)(function(e){return{user:e.user,aside:e.aside}},function(e){return{userInfo:function(t){e({type:"SET_USER_VO",payload:Object(Y.a)({},t)})},asideFn:function(t){e({type:"ASIDE",payload:t})},logoOut:function(){e({type:"CLEAR_USER"})},toggleUI:function(t,a){e({type:"CHANGE",payload:{type:t,status:a}})}}})(X),K=a(396),Q=a(394),Z=a(395),ee=a(397),te=a(398),ae=a(390),ne=K.a.Item,re=K.a.create()(function(e){var t=e.form.getFieldDecorator;return r.a.createElement("div",{className:"hide"===e.status?"loginRegContainer":"loginRegContainer showContainer"},r.a.createElement("div",{className:"backIcon",onClick:function(){return e.change(e.type,"hide")}},r.a.createElement(h.a,{type:"left"})),r.a.createElement(Q.a,{type:"flex",justify:"center"},r.a.createElement(Z.a,{span:10,className:"loginLogo"},r.a.createElement("div",{className:"loginLogoDiv"},r.a.createElement(h.a,{type:"pie-chart"})),r.a.createElement("div",{className:"loginLogoDiv"},"Welcome"))),r.a.createElement(Q.a,{type:"flex",justify:"center",style:{marginTop:"30px"}},r.a.createElement(Z.a,{span:23},r.a.createElement(K.a,{onSubmit:function(t){return function(t){t.preventDefault(),e.form.validateFields(function(t,a){if(!t){if(/ /.test(a.name))return void I.a.fail("\u7528\u6237\u540d\u4e0d\u5305\u542b\u7a7a\u683c",1);if(a.name.length>20)return void I.a.fail("\u7528\u6237\u540d\u4e0d\u8d85\u8fc720\u5b57\u7b26",1);if(/ /.test(a.pwd))return void I.a.fail("\u5bc6\u7801\u4e0d\u5305\u542b\u7a7a\u683c",1);if(a.pwd.length>20)return void I.a.fail("\u5bc6\u7801\u4e0d\u8d85\u8fc716\u4f4d",1);a.pwd=L.Base64.encode(a.pwd),console.log("Received values of form: ",a),I.a.loading(e.type+"\u4e2d...",3),fetch("login"===e.type?"/login":"/register",{method:"POST",headers:{"content-type":"application/json",accept:"application/json"},body:JSON.stringify(a)}).then(function(e){return I.a.hide(),e.status>=200&&e.status<300?e.json():e.status}).then(function(t){t.success?(I.a.success("login"===e.type?"\u767b\u9646\u6210\u529f":"\u6ce8\u518c\u6210\u529f\uff0c\u5df2\u81ea\u52a8\u767b\u5f55",1,function(){return e.change(e.type,"hide")}),sessionStorage&&sessionStorage.setItem("user",L.Base64.encode(a.name)),e.userInfo(Object(Y.a)({},t,{text:"\u6ce8\u9500"}))):I.a.fail(t.errorMsg,1)}).catch(function(e){I.a.offline(e,1)})}})}(t)},className:"login-form"},r.a.createElement(ne,null,t("name",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d\uff01"}]})(r.a.createElement(ee.a,{className:"_input",prefix:r.a.createElement(h.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u7528\u6237\u540d"}))),r.a.createElement(ne,null,t("pwd",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801\uff01"}]})(r.a.createElement(ee.a,{className:"_input",prefix:r.a.createElement(h.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"\u5bc6\u7801"}))),"login"===e.type&&r.a.createElement(ne,null,t("state",{valuePropName:"checked",initialValue:!0})(r.a.createElement(te.a,null,"\u8bb0\u4f4f\u767b\u5f55\u72b6\u6001"))),r.a.createElement(ne,null,r.a.createElement(ae.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"login"===e.type?"\u767b\u9646":"\u6ce8\u518c"))))))}),ie=Object(g.b)(function(e){return Object(Y.a)({},e.loginUI)},function(e){return{change:function(t,a){e({type:"CHANGE",payload:{type:t,status:a}})},userInfo:function(t){e({type:"SET_USER_VO",payload:Object(Y.a)({},t)})}}})(re),oe=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=document.getElementsByClassName("container")[0];e.style.height=window.innerHeight+"px",window.addEventListener("resize",function(){e.style.height=window.innerHeight+"px"})}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(ie,null),r.a.createElement($,null),!this.props.user.name&&r.a.createElement(d.a,{marqueeProps:{loop:!0,style:{padding:"0 7.5px"}},mode:"closable",action:r.a.createElement("span",{style:{color:"#a1a1a1"}},"\u4e0d\u518d\u63d0\u793a")},"\u79fb\u52a8\u7aefwith React\uff0c\u6ca1\u6709pc\u7684\u6548\u679c\uff0c\u79fb\u52a8\u7aef\u4ecd\u5728\u6d4b\u8bd5\uff0c\u5b8c\u6574\u4ea4\u4e92\u5728pc\u7aef`"),r.a.createElement(b,null),r.a.createElement(W,null),r.a.createElement(v,null))}}]),t}(r.a.PureComponent),se=Object(g.b)(function(e){return{user:e.user}},function(){return{}})(oe),le=a(399),ce=(a(385),function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=document.getElementsByClassName("App")[0];e.style.height=window.innerHeight+"px",window.addEventListener("resize",function(){e.style.height=window.innerHeight+"px"})}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(le.a,null,r.a.createElement(x.a,{path:"/",component:se})))}}]),t}(n.Component)),ue=a(58),me=Object(ue.b)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{status:!1,text:"\u767b\u9646"},t=arguments.length>1?arguments[1]:void 0;if("SET_USER_VO"===t.type)return Object(Y.a)({},t.payload,{status:!0});if("CLEAR_USER"===t.type&&sessionStorage.getItem("user")){var a=new Date(-1);return document.cookie="user="+sessionStorage.getItem("user")+";path=/;expires="+a,sessionStorage.removeItem("user"),{status:!1,text:"\u767b\u9646"}}return e},logo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{src:"home",item:"\u9996\u9875"},t=arguments.length>1?arguments[1]:void 0;return"LOGO"===t.type?t.payload:e},loginUI:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"login",status:"hide"},t=arguments.length>1?arguments[1]:void 0;if("CHANGE"===t.type)return Object(Y.a)({},t.payload);return e},aside:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"hide",t=arguments.length>1?arguments[1]:void 0;if("ASIDE"===t.type)return t.payload;return e}});var pe=Object(ue.c)(me,{});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(g.a,{store:pe},r.a.createElement(ce,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[167,2,1]]]);
//# sourceMappingURL=main.17bbc687.chunk.js.map